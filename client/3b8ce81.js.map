{"version":3,"sources":["webpack:///./modules/checkout/pages/Checkout/Shipping.vue?fcf6","webpack:///./modules/checkout/pages/Checkout/Shipping.vue?14e6","webpack:///./modules/checkout/pages/Checkout/Shipping.vue?c91d","webpack:///./modules/checkout/pages/Checkout/Shipping.vue","webpack:///./helpers/asyncLocalStorage.ts","webpack:///./modules/customer/getters/addressGetter.ts","webpack:///./helpers/checkout/steps.ts","webpack:///./helpers/checkout/address.ts","webpack:///./modules/customer/getters/userShippingGetters.ts","webpack:///./modules/checkout/pages/Checkout/Shipping.vue?81ad"],"names":["extend","required","message","min","digits","defineComponent","name","components","SfHeading","SfInput","SfButton","SfSelect","ValidationProvider","ValidationObserver","UserShippingAddresses","VsfShippingProvider","setup","router","useRouter","app","useContext","userShipping","ref","useShipping","loadShipping","load","saveShipping","save","isShippingLoading","loading","useUserAddress","loadUserShipping","setDefaultAddress","useCountrySearch","loadCountries","searchCountry","search","countries","country","isAuthenticated","useUser","shippingDetails","getInitialCheckoutAddressForm","shippingMethods","currentAddressId","isSetAsDefaultRequested","isFormSubmitted","isAddNewAddressFormVisible","isShippingDetailsStepCompleted","addresses","computed","userShippingGetters","getAddresses","value","canMoveForward","Object","keys","length","hasSavedShippingAddress","countriesList","addressGetter","regionInformation","regionList","handleSetCurrentAddress","customerAddress","id","addressFromApiToForm","country_code","changeShippingDetails","field","changeCountry","newCountry","region","onMounted","isPreviousStepValid","push","localeRoute","Promise","all","loadedShippingInfoBoundToCart","loadedUserShipping","loadedCountries","default_shipping","defaultAddress","Boolean","userAddressIdenticalToSavedCartAddress","findUserAddressIdenticalToSavedCartAddress","handleAddNewAddressBtnClick","handleAddressSubmit","reset","addressId","shippingDetailsData","customerAddressId","save_in_address_book","mergeItem","shipping","shippingInfo","available_shipping_methods","chosenAddress","address","component","_vm","this","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","handleSubmit","dirty","directives","rawName","expression","staticClass","attrs","$t","_v","_e","on","$event","preventDefault","model","callback","$$v","errors","firstname","lastname","street","apartment","city","_l","regionOption","abbreviation","_s","label","countryOption","postcode","$set","$router","getVsfKey","createPromise","getValue","resolve","reject","err","getItem","JSON","parse","window","localStorage","removeItem","oldValue","oldObject","newObject","nextValue","stringify","setItem","mergeLocalStorageItem","filter","c","full_name_english","full_name_locale","map","englishLabel","two_letter_abbreviation","sort","a","b","localeCompare","available_regions","code","stepToValidate","checkout","formatAddressReturnToData","telephone","region_code","customerAddresses","cartAddress","find","userAddress","isEqual","criteria","Logger","debug","entries","every","getDefault","getTotal","getPostCode","getStreetName","Array","isArray","getApartmentNumber","getCity","getFirstName","getLastName","getCountry","getPhone","phone","getEmail","email","getProvince","getCompanyName","company","getId","isDefault"],"mappings":"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","file":"3b8ce81.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ValidationObserver',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nvar dirty = ref.dirty;\nvar reset = ref.reset;\nreturn [_c('SfHeading',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-heading'),expression:\"'shipping-heading'\"}],staticClass:\"sf-heading--left sf-heading--no-underline title\",attrs:{\"level\":3,\"title\":_vm.$t('Shipping address')}}),_vm._v(\" \"),(_vm.hasSavedShippingAddress)?_c('SfHeading',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-heading'),expression:\"'shipping-heading'\"}],staticClass:\"sf-heading--left sf-heading--no-underline form-subtitle\",attrs:{\"level\":4,\"title\":_vm.$t('Select previously saved address')}}):_vm._e(),_vm._v(\" \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();handleSubmit(_vm.handleAddressSubmit(reset))}}},[(_vm.isAuthenticated && _vm.hasSavedShippingAddress)?_c('UserShippingAddresses',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-addresses'),expression:\"'shipping-addresses'\"}],attrs:{\"current-address-id\":_vm.currentAddressId,\"shipping-addresses\":_vm.addresses,\"countries\":_vm.countries},on:{\"setCurrentAddress\":function($event){return _vm.handleSetCurrentAddress($event)}},model:{value:(_vm.isSetAsDefaultRequested),callback:function ($$v) {_vm.isSetAsDefaultRequested=$$v},expression:\"isSetAsDefaultRequested\"}}):_vm._e(),_vm._v(\" \"),(_vm.isAddNewAddressFormVisible)?_c('div',{staticClass:\"form\"},[(_vm.hasSavedShippingAddress)?_c('SfHeading',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-heading'),expression:\"'shipping-heading'\"}],staticClass:\"sf-heading--left sf-heading--no-underline form-subtitle\",attrs:{\"level\":4,\"title\":_vm.$t('Enter different address')}}):_vm._e(),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"firstname\",\"rules\":\"required|min:2\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-firstName'),expression:\"'shipping-firstName'\"}],staticClass:\"form__element form__element--half\",attrs:{\"value\":_vm.shippingDetails.firstname,\"label\":_vm.$t('First Name'),\"name\":\"firstName\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":function($event){return _vm.changeShippingDetails('firstname', $event)}}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"lastname\",\"rules\":\"required|min:2\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-lastName'),expression:\"'shipping-lastName'\"}],staticClass:\"form__element form__element--half form__element--half-even\",attrs:{\"value\":_vm.shippingDetails.lastname,\"label\":_vm.$t('Last Name'),\"name\":\"lastName\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":function($event){return _vm.changeShippingDetails('lastname', $event)}}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"street\",\"rules\":\"required\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-streetName'),expression:\"'shipping-streetName'\"}],staticClass:\"form__element form__element--half\",attrs:{\"value\":_vm.shippingDetails.street,\"label\":_vm.$t('Street Name'),\"name\":\"streetName\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":function($event){return _vm.changeShippingDetails('street', $event)}}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"apartment\",\"rules\":\"required|min:1\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-apartment'),expression:\"'shipping-apartment'\"}],staticClass:\"form__element form__element--half form__element--half-even\",attrs:{\"value\":_vm.shippingDetails.apartment,\"label\":_vm.$t('House/Apartment number'),\"name\":\"apartment\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":function($event){return _vm.changeShippingDetails('apartment', $event)}}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"city\",\"rules\":\"required|min:2\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-city'),expression:\"'shipping-city'\"}],staticClass:\"form__element form__element--half\",attrs:{\"value\":_vm.shippingDetails.city,\"label\":_vm.$t('City'),\"name\":\"city\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":function($event){return _vm.changeShippingDetails('city', $event)}}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"region\",\"rules\":!_vm.shippingDetails.country_code || _vm.regionInformation.length === 0\n            ? null\n            : 'required|min:2',\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n            var errors = ref.errors;\nreturn [(\n            !_vm.shippingDetails.country_code || _vm.regionInformation.length === 0\n          )?_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-state'),expression:\"'shipping-state'\"}],staticClass:\"form__element form__element--half form__element--half-even\",attrs:{\"value\":_vm.shippingDetails.region,\"label\":_vm.$t('State/Province'),\"disabled\":!_vm.shippingDetails.country_code,\"name\":\"state\",\"valid\":!!_vm.shippingDetails.country_code,\"error-message\":!_vm.shippingDetails.country_code\n              ? _vm.$t('Please select a country first')\n              : ''},on:{\"input\":function($event){return _vm.changeShippingDetails('region', $event)}}}):_c('SfSelect',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-state'),expression:\"'shipping-state'\"}],staticClass:\"form__element form__element--half form__element--half-even form__select sf-select--underlined\",attrs:{\"value\":_vm.shippingDetails.region,\"label\":_vm.$t('State/Province'),\"name\":\"state\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":function($event){return _vm.changeShippingDetails('region', $event)}}},[_c('SfSelectOption',{attrs:{\"value\":''}}),_vm._v(\" \"),_vm._l((_vm.regionInformation),function(regionOption){return _c('SfSelectOption',{key:regionOption.id,attrs:{\"value\":regionOption.abbreviation}},[_vm._v(\"\\n            \"+_vm._s(regionOption.label)+\"\\n          \")])})],2)]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"country\",\"rules\":\"required|min:2\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n              var errors = ref.errors;\nreturn [_c('SfSelect',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-country'),expression:\"'shipping-country'\"}],staticClass:\"form__element form__element--half form__select sf-select--underlined\",attrs:{\"value\":_vm.shippingDetails.country_code,\"label\":_vm.$t('Country'),\"name\":\"country\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":_vm.changeCountry}},[_c('SfSelectOption',{attrs:{\"value\":''}}),_vm._v(\" \"),_vm._l((_vm.countriesList),function(countryOption){return _c('SfSelectOption',{key:countryOption.id,attrs:{\"value\":countryOption.abbreviation}},[_vm._v(\"\\n            \"+_vm._s(countryOption.label)+\"\\n          \")])})],2)]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"zipCode\",\"rules\":\"required|min:2\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n              var errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-zipcode'),expression:\"'shipping-zipcode'\"}],staticClass:\"form__element form__element--half form__element--half-even\",attrs:{\"value\":_vm.shippingDetails.postcode,\"label\":_vm.$t('Zip-code'),\"name\":\"zipCode\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":function($event){return _vm.changeShippingDetails('postcode', $event)}}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"phone\",\"rules\":\"required|min:8\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n              var errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-phone'),expression:\"'shipping-phone'\"}],staticClass:\"form__element form__element--half\",attrs:{\"label\":_vm.$t('Phone number'),\"name\":\"phone\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0])},on:{\"input\":function($event){return _vm.changeShippingDetails('telephone', $event)}},model:{value:(_vm.shippingDetails.telephone),callback:function ($$v) {_vm.$set(_vm.shippingDetails, \"telephone\", $$v)},expression:\"shippingDetails.telephone\"}})]}}],null,true)})],1):_vm._e(),_vm._v(\" \"),(!_vm.isAddNewAddressFormVisible)?_c('SfButton',{staticClass:\"color-light form__action-button form__action-button--add-address\",attrs:{\"type\":\"submit\"},on:{\"click\":_vm.handleAddNewAddressBtnClick}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('Add new address'))+\"\\n    \")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"form\"},[_c('div',{staticClass:\"form__action\"},[(!(_vm.isShippingDetailsStepCompleted && !dirty))?_c('SfButton',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('select-shipping'),expression:\"'select-shipping'\"}],staticClass:\"form__action-button\",attrs:{\"disabled\":_vm.isShippingLoading,\"type\":\"submit\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('Select shipping method'))+\"\\n        \")]):_vm._e()],1)]),_vm._v(\" \"),(_vm.isShippingDetailsStepCompleted && !dirty)?_c('VsfShippingProvider',{attrs:{\"shipping-methods\":_vm.shippingMethods},on:{\"submit\":function($event){_vm.$router.push(_vm.localeRoute({ name: 'billing' }))}}}):_vm._e()],1)]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  SfHeading, SfInput, SfButton, SfSelect,\n} from '@storefront-ui/vue';\nimport {\n  ref,\n  computed,\n  onMounted,\n  defineComponent,\n  useRouter,\n  useContext,\n} from '@nuxtjs/composition-api';\nimport { required, min, digits } from 'vee-validate/dist/rules';\nimport { ValidationProvider, ValidationObserver, extend } from 'vee-validate';\nimport userShippingGetters from '~/modules/customer/getters/userShippingGetters';\nimport addressGetter from '~/modules/customer/getters/addressGetter';\nimport { useCountrySearch } from '~/composables';\nimport type {\n  Country, AvailableShippingMethod, CustomerAddress, Customer,\n} from '~/modules/GraphQL/types';\nimport useShipping from '~/modules/checkout/composables/useShipping';\nimport useUser from '~/modules/customer/composables/useUser';\nimport useUserAddress from '~/modules/customer/composables/useUserAddress';\nimport {\n  addressFromApiToForm, CheckoutAddressForm, findUserAddressIdenticalToSavedCartAddress, getInitialCheckoutAddressForm,\n} from '~/helpers/checkout/address';\nimport { mergeItem } from '~/helpers/asyncLocalStorage';\nimport { isPreviousStepValid } from '~/helpers/checkout/steps';\n\nextend('required', {\n  ...required,\n  message: 'This field is required',\n});\nextend('min', {\n  ...min,\n  message: 'The field should have at least {length} characters',\n});\nextend('digits', {\n  ...digits,\n  message: 'Please provide a valid phone number',\n});\n\nexport default defineComponent({\n  name: 'ShippingStep',\n  components: {\n    SfHeading,\n    SfInput,\n    SfButton,\n    SfSelect,\n    ValidationProvider,\n    ValidationObserver,\n    UserShippingAddresses: () => import('~/modules/checkout/components/UserShippingAddresses.vue'),\n    VsfShippingProvider: () => import('~/modules/checkout/components/VsfShippingProvider.vue'),\n  },\n  setup() {\n    const router = useRouter();\n    const { app } = useContext();\n    const userShipping = ref<Customer | null>(null);\n    const {\n      load: loadShipping,\n      save: saveShipping,\n      loading: isShippingLoading,\n    } = useShipping();\n    const {\n      load: loadUserShipping,\n      setDefaultAddress,\n    } = useUserAddress();\n\n    const {\n      load: loadCountries,\n      search: searchCountry,\n    } = useCountrySearch();\n    const countries = ref<Country[]>([]);\n    const country = ref<Country | null>(null);\n    const { isAuthenticated } = useUser();\n    const shippingDetails = ref<CheckoutAddressForm>(getInitialCheckoutAddressForm());\n    const shippingMethods = ref<AvailableShippingMethod[]>([]);\n    const currentAddressId = ref<number | null>(null);\n\n    const isSetAsDefaultRequested = ref(false);\n    const isFormSubmitted = ref(false);\n    const isAddNewAddressFormVisible = ref(true);\n\n    const isShippingDetailsStepCompleted = ref(false);\n    const addresses = computed(() => userShippingGetters.getAddresses(userShipping.value));\n\n    const canMoveForward = computed(() => !isShippingLoading.value && shippingDetails.value && Object.keys(\n      shippingDetails.value,\n    ).length > 0);\n\n    const hasSavedShippingAddress = computed(() => {\n      if (!isAuthenticated.value || !userShipping.value) {\n        return false;\n      }\n      return addresses.value.length > 0;\n    });\n\n    const countriesList = computed(() => addressGetter.countriesList(countries.value));\n\n    const regionInformation = computed(() => addressGetter.regionList(country.value));\n\n    const handleAddressSubmit = (reset: () => void) => async () => {\n      const addressId = currentAddressId.value;\n      const shippingDetailsData = {\n        ...shippingDetails.value,\n        customerAddressId: addressId,\n        save_in_address_book: false,\n      };\n      await mergeItem('checkout', { shipping: shippingDetailsData });\n\n      const shippingInfo = await saveShipping({ shippingDetails: shippingDetailsData });\n      shippingMethods.value = shippingInfo?.available_shipping_methods ?? [];\n\n      if (addressId !== null && isSetAsDefaultRequested.value) {\n        const [chosenAddress] = userShippingGetters.getAddresses(\n          userShipping.value,\n          { id: addressId },\n        );\n        chosenAddress.default_shipping = isSetAsDefaultRequested.value;\n        if (chosenAddress) {\n          await setDefaultAddress({ address: chosenAddress });\n          userShipping.value = await loadUserShipping(true);\n        }\n      }\n      reset();\n      isShippingDetailsStepCompleted.value = true;\n    };\n\n    const handleAddNewAddressBtnClick = () => {\n      currentAddressId.value = null;\n      shippingDetails.value = getInitialCheckoutAddressForm();\n      isAddNewAddressFormVisible.value = true;\n      isShippingDetailsStepCompleted.value = false;\n    };\n\n    const handleSetCurrentAddress = async (customerAddress: CustomerAddress) => {\n      const id = customerAddress?.id;\n      currentAddressId.value = id;\n      if (id) {\n        isAddNewAddressFormVisible.value = false;\n      }\n      shippingDetails.value = addressFromApiToForm(customerAddress);\n      country.value = customerAddress.country_code ? await searchCountry({ id: customerAddress.country_code }) : null;\n      isShippingDetailsStepCompleted.value = false;\n    };\n\n    const changeShippingDetails = (field: keyof CheckoutAddressForm, value: string) => {\n      shippingDetails.value[field] = value;\n      isShippingDetailsStepCompleted.value = false;\n      currentAddressId.value = null;\n    };\n\n    const changeCountry = async (id: string) => {\n      changeShippingDetails('country_code', id);\n      const newCountry = await searchCountry({ id });\n      shippingDetails.value.region = '';\n      country.value = newCountry;\n    };\n\n    onMounted(async () => {\n      const validStep = await isPreviousStepValid('user-account');\n      if (!validStep) {\n        await router.push(app.localeRoute({ name: 'user-account' }));\n      }\n      const [loadedShippingInfoBoundToCart, loadedUserShipping, loadedCountries] = await Promise.all([\n        loadShipping(),\n        loadUserShipping(),\n        loadCountries(),\n      ]);\n      const [defaultAddress = null] = userShippingGetters.getAddresses(loadedUserShipping, { default_shipping: true });\n      const wasShippingAddressAlreadySetOnCart = Boolean(loadedShippingInfoBoundToCart);\n\n      if (wasShippingAddressAlreadySetOnCart) {\n        const userAddressIdenticalToSavedCartAddress = findUserAddressIdenticalToSavedCartAddress(\n          loadedUserShipping?.addresses,\n          loadedShippingInfoBoundToCart,\n        );\n        handleSetCurrentAddress({ ...loadedShippingInfoBoundToCart, id: userAddressIdenticalToSavedCartAddress?.id });\n      } else if (defaultAddress) {\n        handleSetCurrentAddress(defaultAddress);\n      }\n      if (shippingDetails.value?.country_code) {\n        country.value = await searchCountry({ id: shippingDetails.value.country_code });\n      }\n      userShipping.value = loadedUserShipping;\n      countries.value = loadedCountries;\n    });\n\n    return {\n      isAddNewAddressFormVisible,\n      canMoveForward,\n      changeCountry,\n      changeShippingDetails,\n      countries,\n      countriesList,\n      country,\n      currentAddressId,\n      handleAddNewAddressBtnClick,\n      handleAddressSubmit,\n      handleSetCurrentAddress,\n      hasSavedShippingAddress,\n      isAuthenticated,\n      isFormSubmitted,\n      isShippingDetailsStepCompleted,\n      isShippingLoading,\n      regionInformation,\n      searchCountry,\n      isSetAsDefaultRequested,\n      shippingDetails,\n      shippingMethods,\n      addresses,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--13-0!../../../../node_modules/ts-loader/index.js??ref--13-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./Shipping.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--13-0!../../../../node_modules/ts-loader/index.js??ref--13-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./Shipping.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Shipping.vue?vue&type=template&id=4120bf6e&scoped=true&\"\nimport script from \"./Shipping.vue?vue&type=script&lang=ts&\"\nexport * from \"./Shipping.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Shipping.vue?vue&type=style&index=0&id=4120bf6e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4120bf6e\",\n  null\n  \n)\n\nexport default component.exports","const getVsfKey = (key: string) => `vsf-${key}`;\n\ntype Callback<TValue> = (error: Error | null, value?: TValue) => void;\n\nconst mergeLocalStorageItem = (key: string, value: Record<string, unknown>) : void => {\n  const oldValue = window.localStorage.getItem(key);\n  const oldObject = JSON.parse(oldValue);\n  const newObject = value;\n  const nextValue = JSON.stringify({\n    ...JSON.parse(JSON.stringify(oldObject)),\n    ...JSON.parse(JSON.stringify(newObject)),\n  });\n  window.localStorage.setItem(key, nextValue);\n};\n\nconst createPromise = <TValue>(\n  getValue: () => TValue,\n  callback: Callback<TValue>,\n) : Promise<TValue> => new Promise((resolve, reject) => {\n  try {\n    const value = getValue();\n    if (callback) {\n      callback(null, value);\n    }\n    resolve(value);\n  } catch (err) {\n    if (callback) {\n      callback(err as Error);\n    }\n    reject(err);\n  }\n});\n\nexport const getItem = <T = unknown>(\n  key: string,\n  callback?: Callback<T>,\n): Promise<T> => createPromise(() => JSON.parse(window.localStorage.getItem(getVsfKey(key))), callback);\n\nexport const setItem = <T = unknown>(\n  key: string,\n  value: T,\n  callback?: Callback<void>,\n): Promise<void> => createPromise(() => (window.localStorage.setItem(getVsfKey(key), JSON.stringify(value))), callback);\n\nexport const removeItem = (\n  key: string,\n  callback?: Callback<void>,\n): Promise<void> => createPromise(() => {\n  window.localStorage.removeItem(getVsfKey(key));\n}, callback);\n\nexport const mergeItem = (\n  key: string,\n  value: Record<string, unknown>,\n  callback?: Callback<void>,\n): Promise<void> => createPromise(() => mergeLocalStorageItem(getVsfKey(key), value), callback);\n\nexport const clear = (callback?: Callback<void>): Promise<void> => createPromise(() => {\n  window.localStorage.clear();\n}, callback);\n","import { AddressGetter } from '~/modules/customer/getters/types';\nimport { Countries } from '~/composables';\nimport { Country } from '~/modules/GraphQL/types';\n\nconst countriesList: AddressGetter['countriesList'] = (countries: Countries[]) => countries\n  .filter((c) => c.id && c.full_name_english && c.full_name_locale)\n  .map((c) => ({\n    id: c.id,\n    label: c.full_name_locale,\n    englishLabel: c.full_name_english,\n    abbreviation: c.two_letter_abbreviation,\n  }))\n  .sort((a, b) => a.label.localeCompare(b.label));\n\nconst regionList: AddressGetter['regionList'] = (country: Country) => (country?.available_regions ? country.available_regions\n  .filter((c) => c.id && c.code && c.name)\n  .map((c) => ({\n    id: c.id,\n    label: c.name,\n    abbreviation: c.code,\n  } as {\n    id: number;\n    label: string;\n    abbreviation: string;\n  }))\n  .sort((a, b) => a.label.localeCompare(b.label)) : []);\n\nexport default {\n  countriesList,\n  regionList,\n} as AddressGetter;\n","import { getItem } from '~/helpers/asyncLocalStorage';\n\nexport const isPreviousStepValid = async (stepToValidate: string) => {\n  const checkout = await getItem('checkout');\n  return !(!checkout || !checkout[stepToValidate]);\n};\n","import { isEqual } from 'lodash-es';\nimport type { CustomerAddress, CartAddressInterface } from '~/modules/GraphQL/types';\n\nexport const formatAddressReturnToData = (address: CartAddressInterface) => ({\n  firstname: address.firstname,\n  lastname: address.lastname,\n  street: address.street[0],\n  apartment: address.street[1],\n  city: address.city,\n  region: address.region.code,\n  country_code: address.country.code,\n  postcode: address.postcode,\n  telephone: address.telephone,\n});\n\n/**\n * Converts addresses that were:\n * * added to the logged in user's account\n * * saved in the cart (eg. completed the shipping address step and saved in the Checkout page, then went to some other page)\n * into the form data format used by Billing and Shipping forms in the Checkout page\n */\nexport const addressFromApiToForm = (address: CustomerAddress | CartAddressInterface) : CheckoutAddressForm => ({\n  firstname: address.firstname,\n  lastname: address.lastname,\n  street: address.street?.[0],\n  apartment: address.street?.[1],\n  city: address.city,\n  region: (address as CustomerAddress)?.region?.region_code ?? (address as CartAddressInterface).region.code,\n  country_code: (address as CustomerAddress)?.country_code ?? (address as CartAddressInterface).country.code,\n  postcode: address.postcode,\n  telephone: address.telephone,\n});\n\nexport interface CheckoutAddressForm {\n  firstname: string;\n  lastname: string;\n  street: string;\n  apartment: string;\n  city: string;\n  region: string;\n  country_code: string;\n  postcode: string;\n  telephone: string;\n}\n\nexport const getInitialCheckoutAddressForm = () : CheckoutAddressForm => ({\n  firstname: '',\n  lastname: '',\n  street: '',\n  apartment: '',\n  city: '',\n  region: '',\n  country_code: '',\n  postcode: '',\n  telephone: '',\n});\n\n/**\n * Try to find an address from the user's saved addresses that exactly matches the address that is bound to a cart.\n *\n * `useShipping().save()``sends an addressId to Magento to set the shipping address on the cart,\n * but when you download the cart after that - the cart's endpoint response doesn't contain that addressId, just the address fields (street etc.)\n * So the only choice left is to try to compare the fields of the addresses.\n *\n * This function exists because if a user returns to a cart whose shipping address was set before, we want the user address to be highlighted in the SfAddressPicker component.\n *\n * @param customerAddresses The addresses saved in a user's account\n * @param cartAddress The address that is bound to the cart, @see Cart[\"billing_address\"] Cart[\"shipping_addresses\"]\n *\n */\nexport const findUserAddressIdenticalToSavedCartAddress = (\n  customerAddresses: CustomerAddress[] | null,\n  cartAddress: CartAddressInterface,\n) : CustomerAddress => customerAddresses?.find(\n  (userAddress) => isEqual(addressFromApiToForm(userAddress), addressFromApiToForm(cartAddress)),\n) ?? null;\n","import { UserShippingGetters } from '~/modules/customer/getters/types';\nimport { Customer, CustomerAddress } from '~/modules/GraphQL/types';\nimport { Logger } from '~/helpers/logger';\nimport { TransformedCustomerAddress } from '../composables/types';\n\nconst userShippingGetters: UserShippingGetters<Customer, CustomerAddress, TransformedCustomerAddress> = {\n  getAddresses: (shipping, criteria?: Record<string, any>) => {\n    Logger.debug(shipping);\n    if (!shipping || !shipping.addresses) return [] as CustomerAddress[];\n\n    if (!criteria || Object.keys(criteria).length === 0) {\n      return shipping.addresses;\n    }\n\n    const entries = Object.entries(criteria);\n    return shipping.addresses.filter((address) => entries.every(([key, value]: [ keyof CustomerAddress, unknown ]) => address[key] === value));\n  },\n  getDefault: (shipping) => shipping.addresses.find(({ default_shipping }) => default_shipping),\n  getTotal: (shipping) => shipping.addresses.length,\n  getPostCode: (address) => address?.postcode || '',\n  getStreetName: (address) => (Array.isArray(address?.street) ? address?.street[0] : ''),\n  getApartmentNumber: (address) => (Array.isArray(address?.street) ? address?.street[1] : ''),\n  getCity: (address) => address?.city || '',\n  getFirstName: (address) => address?.firstname || '',\n  getLastName: (address) => address?.lastname || '',\n  getCountry: (address) => address?.country_code || '',\n  getPhone: (address) => address?.phone || '',\n  getEmail: (address) => address?.email || '',\n  getProvince: (address) => (address?.region?.region_code || address?.region?.region) || '',\n  getCompanyName: (address) => address?.company || '',\n  getId: (address) => address?.id || '',\n  isDefault: (address) => address?.default_shipping || false,\n};\n\nexport default userShippingGetters;\n","export * from \"-!../../../../node_modules/extract-css-chunks-webpack-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./Shipping.vue?vue&type=style&index=0&id=4120bf6e&prod&lang=scss&scoped=true&\""],"sourceRoot":""}