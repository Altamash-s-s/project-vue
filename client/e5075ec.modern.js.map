{"version":3,"sources":["webpack:///./node_modules/@storefront-ui/vue/src/components/atoms/SfLoader/SfLoader.vue?577f","webpack:///./node_modules/@storefront-ui/vue/src/components/atoms/SfLoader/SfLoader.vue?27af","webpack:///./node_modules/@storefront-ui/vue/src/components/atoms/SfLoader/SfLoader.vue?e586","webpack:///node_modules/@storefront-ui/vue/src/components/atoms/SfLoader/SfLoader.vue","webpack:///./node_modules/@storefront-ui/vue/src/components/atoms/SfLoader/SfLoader.vue","webpack:///./modules/customer/helpers/passwordValidation.ts","webpack:///./modules/customer/pages/MyAccount/ResetPassword.vue?be71","webpack:///./modules/customer/pages/MyAccount/ResetPassword.vue?c91d","webpack:///./modules/customer/getters/forgotPasswordGetters.ts","webpack:///./modules/customer/pages/MyAccount/ResetPassword.vue?3947","webpack:///./modules/customer/pages/MyAccount/ResetPassword.vue?5c6e","webpack:///./modules/customer/pages/MyAccount/ResetPassword.vue"],"names":["name","props","loading","default","type","component","_h","_vm","_c","_g","_b","ref","data","class","staticClass","style","staticStyle","attrs","listeners","_t","_v","customerPasswordRegExp","invalidPasswordMsg","forgotPasswordGetters","getResetPasswordToken","_result","isPasswordChanged","result","resetPassword","extend","email","message","required","validate","value","test","defineComponent","components","SfButton","SfHeading","SfLoader","SfInput","ValidationProvider","ValidationObserver","middleware","redirect","route","query","token","setup","setNew","error","forgotPasswordError","forgotPasswordLoading","useForgotPassword","passwordMatchError","form","password","repeatPassword","computed","useRoute","$recaptcha","$config","useContext","isRecaptchaEnabled","isRecaptcha","setNewPassword","init","recaptchaToken","getResponse","tokenValue","newPassword","reset","this","$createElement","_self","$t","_s","key","scopedSlots","_u","fn","handleSubmit","on","$event","preventDefault","errors","directives","rawName","expression","model","callback","$$v","$set","_e","loader"],"mappings":"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","file":"e5075ec.modern.js","sourcesContent":["export * from \"-!../../../../../../extract-css-chunks-webpack-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../../../css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../../postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../../sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../../../../sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../../../../../../vue-loader/lib/index.js??vue-loader-options!./SfLoader.vue?vue&type=style&index=0&id=fc220c12&prod&lang=scss&\"","var render = function (_h,_vm) {var _c=_vm._c;return _c('div',_vm._g(_vm._b({ref:_vm.data.ref,class:[_vm.data.class, _vm.data.staticClass, 'sf-loader'],style:([_vm.data.style, _vm.data.staticStyle])},'div',_vm.data.attrs,false),_vm.listeners),[_c('transition',{attrs:{\"name\":\"sf-fade\",\"mode\":\"out-in\"}},[(!_vm.props.loading)?_vm._t(\"default\"):_c('div',{staticClass:\"sf-loader__overlay\"},[_vm._t(\"loader\",function(){return [_c('svg',{staticClass:\"sf-loader__spinner\",attrs:{\"role\":\"img\",\"width\":\"38\",\"height\":\"38\",\"viewBox\":\"0 0 38 38\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('title',[_vm._v(\"Loading...\")]),_vm._v(\" \"),_c('g',{attrs:{\"fill\":\"none\",\"fill-rule\":\"evenodd\"}},[_c('g',{attrs:{\"transform\":\"translate(1 1)\",\"stroke-width\":\"2\"}},[_c('circle',{attrs:{\"stroke-opacity\":\".5\",\"cx\":\"18\",\"cy\":\"18\",\"r\":\"18\"}}),_vm._v(\" \"),_c('path',{attrs:{\"d\":\"M36 18c0-9.94-8.06-18-18-18\"}},[_c('animateTransform',{attrs:{\"attributeName\":\"transform\",\"type\":\"rotate\",\"from\":\"0 18 18\",\"to\":\"360 18 18\",\"dur\":\"1s\",\"repeatCount\":\"indefinite\"}})],1)])])])]})],2)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../babel-loader/lib/index.js??ref--2-0!../../../../../../vue-loader/lib/index.js??vue-loader-options!./SfLoader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../babel-loader/lib/index.js??ref--2-0!../../../../../../vue-loader/lib/index.js??vue-loader-options!./SfLoader.vue?vue&type=script&lang=js&\"","<template functional>\n  <div\n    :ref=\"data.ref\"\n    :class=\"[data.class, data.staticClass, 'sf-loader']\"\n    :style=\"[data.style, data.staticStyle]\"\n    v-bind=\"data.attrs\"\n    v-on=\"listeners\"\n  >\n    <transition name=\"sf-fade\" mode=\"out-in\">\n      <slot v-if=\"!props.loading\"></slot>\n      <div v-else class=\"sf-loader__overlay\">\n        <slot name=\"loader\">\n          <svg\n            role=\"img\"\n            width=\"38\"\n            height=\"38\"\n            viewBox=\"0 0 38 38\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            class=\"sf-loader__spinner\"\n          >\n            <title>Loading...</title>\n            <g fill=\"none\" fill-rule=\"evenodd\">\n              <g transform=\"translate(1 1)\" stroke-width=\"2\">\n                <circle stroke-opacity=\".5\" cx=\"18\" cy=\"18\" r=\"18\" />\n                <path d=\"M36 18c0-9.94-8.06-18-18-18\">\n                  <animateTransform\n                    attributeName=\"transform\"\n                    type=\"rotate\"\n                    from=\"0 18 18\"\n                    to=\"360 18 18\"\n                    dur=\"1s\"\n                    repeatCount=\"indefinite\"\n                  />\n                </path>\n              </g>\n            </g>\n          </svg>\n        </slot>\n      </div>\n    </transition>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"SfLoader\",\n  props: {\n    loading: {\n      default: true,\n      type: Boolean,\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n@import \"~@storefront-ui/shared/styles/components/atoms/SfLoader.scss\";\n</style>\n","import { render, staticRenderFns } from \"./SfLoader.vue?vue&type=template&id=fc220c12&functional=true&\"\nimport script from \"./SfLoader.vue?vue&type=script&lang=js&\"\nexport * from \"./SfLoader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SfLoader.vue?vue&type=style&index=0&id=fc220c12&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export const customerPasswordRegExp = /(?=.*\\d)(?=.*[A-Za-z])(?=.*[!#$%&*?@^_-])(?!.*\\s).{8,}/;\nexport const invalidPasswordMsg = 'The password must be at least 8 characters long and must contain at least: 1 uppercase or lowercase letter, 1 number, or one special character (E.g. , . _ & ? etc)';\n","export * from \"-!../../../../node_modules/extract-css-chunks-webpack-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./ResetPassword.vue?vue&type=style&index=0&id=b2bfc3c8&prod&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"reset-password\"}},[_c('SfHeading',{staticClass:\"heading sf-heading--no-underline\",attrs:{\"title\":_vm.$t('Reset Password'),\"level\":3}}),_vm._v(\" \"),(!_vm.isPasswordChanged)?_c('div',[_c('ValidationObserver',{key:\"log-in\",scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('form',{staticClass:\"form\",on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.setNewPassword)}}},[_c('ValidationProvider',{attrs:{\"rules\":\"required|email\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('login-modal-email'),expression:\"'login-modal-email'\"}],staticClass:\"form__element\",attrs:{\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"name\":\"email\",\"label\":\"Your email\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"rules\":\"required|password\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('reset-password-modal-password'),expression:\"'reset-password-modal-password'\"}],staticClass:\"form__element\",attrs:{\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"label\":_vm.$t('Password'),\"name\":\"password\",\"type\":\"password\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('reset-password-modal-password-repeat'),expression:\"'reset-password-modal-password-repeat'\"}],staticClass:\"form__element\",attrs:{\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"label\":_vm.$t('Repeat Password'),\"name\":\"repeat-password\",\"type\":\"password\"},model:{value:(_vm.form.repeatPassword),callback:function ($$v) {_vm.$set(_vm.form, \"repeatPassword\", $$v)},expression:\"form.repeatPassword\"}})]}}],null,true)}),_vm._v(\" \"),(_vm.passwordMatchError || _vm.forgotPasswordError.setNew)?_c('div',[_vm._v(\"\\n          \"+_vm._s(_vm.passwordMatchError || _vm.forgotPasswordError.setNew.message)+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(_vm.isRecaptchaEnabled)?_c('recaptcha'):_vm._e(),_vm._v(\" \"),_c('SfButton',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('reset-password-modal-submit'),expression:\"'reset-password-modal-submit'\"}],staticClass:\"sf-button--full-width form__button\",attrs:{\"type\":\"submit\",\"disabled\":_vm.forgotPasswordLoading}},[_c('SfLoader',{class:{ loader: _vm.forgotPasswordLoading },attrs:{\"loading\":_vm.forgotPasswordLoading}},[_c('div',[_vm._v(_vm._s(_vm.$t('Save Password')))])])],1)],1)]}}],null,false,1683253001)})],1):_c('div',[_c('p',[_vm._v(_vm._s(_vm.$t('Password Changed')))]),_vm._v(\" \"),_c('SfButton',{staticClass:\"sf-button\",attrs:{\"link\":\"/\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('Back to home'))+\"\\n    \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { ForgotPasswordGetters } from '~/modules/customer/getters/types';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction getResetPasswordToken(_result: any): string {\n  return '';\n}\n\nconst isPasswordChanged = (result: any): boolean => result?.resetPassword;\n\nexport const forgotPasswordGetters: ForgotPasswordGetters<any> = {\n  getResetPasswordToken,\n  isPasswordChanged,\n};\n\nexport default forgotPasswordGetters;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  SfButton,\n  SfLoader,\n  SfInput,\n  SfHeading,\n} from '@storefront-ui/vue';\nimport {\n  ref,\n  computed,\n  defineComponent,\n  useContext,\n  useRoute,\n} from '@nuxtjs/composition-api';\nimport { ValidationProvider, ValidationObserver, extend } from 'vee-validate';\nimport { email, required } from 'vee-validate/dist/rules';\nimport { forgotPasswordGetters } from '~/modules/customer/getters/forgotPasswordGetters';\nimport { useForgotPassword } from '~/composables';\nimport { customerPasswordRegExp, invalidPasswordMsg } from '~/modules/customer/helpers/passwordValidation';\n\nextend('email', {\n  ...email,\n  message: 'Invalid email',\n});\n\nextend('required', {\n  ...required,\n  message: 'This field is required',\n});\n\nextend('password', {\n  message: invalidPasswordMsg,\n  validate: (value: string) => customerPasswordRegExp.test(value),\n});\n\nexport default defineComponent({\n  name: 'ResetPassword',\n  components: {\n    SfButton,\n    SfHeading,\n    SfLoader,\n    SfInput,\n    ValidationProvider,\n    ValidationObserver,\n  },\n  // eslint-disable-next-line consistent-return\n  middleware({ redirect, route }) {\n    if (!route.query.token) {\n      return redirect('/');\n    }\n  },\n  setup() {\n    const {\n      result,\n      setNew,\n      error: forgotPasswordError,\n      loading: forgotPasswordLoading,\n    } = useForgotPassword();\n    const passwordMatchError = ref<string | null>(null);\n\n    const form = ref({\n      email: '',\n      password: '',\n      repeatPassword: '',\n    });\n    const isPasswordChanged = computed(() => forgotPasswordGetters.isPasswordChanged(result.value));\n\n    const route = useRoute();\n    const { token } = route.value.query;\n    // @ts-expect-error Recaptcha is not registered as a Nuxt module. Its absence is handled in the code\n    const { $recaptcha, $config } = useContext();\n    const isRecaptchaEnabled = ref(typeof $recaptcha !== 'undefined' && $config.isRecaptcha);\n\n    const setNewPassword = async () => {\n      passwordMatchError.value = null;\n      if (form.value.password !== form.value.repeatPassword) {\n        passwordMatchError.value = 'Passwords do not match';\n        return;\n      }\n\n      if (isRecaptchaEnabled.value) {\n        $recaptcha.init();\n      }\n\n      if (isRecaptchaEnabled.value) {\n        const recaptchaToken = await $recaptcha.getResponse();\n\n        await setNew({\n          tokenValue: token as string,\n          newPassword: form.value.password,\n          email: form.value.email,\n          recaptchaToken,\n        });\n      } else {\n        await setNew({\n          tokenValue: token as string,\n          newPassword: form.value.password,\n          email: form.value.email,\n        });\n      }\n\n      if (isRecaptchaEnabled.value) {\n        $recaptcha.reset();\n      }\n    };\n\n    return {\n      isPasswordChanged,\n      form,\n      setNewPassword,\n      forgotPasswordLoading,\n      forgotPasswordError,\n      passwordMatchError,\n      token,\n      result,\n      isRecaptchaEnabled,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--13-0!../../../../node_modules/ts-loader/index.js??ref--13-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./ResetPassword.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--13-0!../../../../node_modules/ts-loader/index.js??ref--13-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./ResetPassword.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ResetPassword.vue?vue&type=template&id=b2bfc3c8&scoped=true&\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=ts&\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ResetPassword.vue?vue&type=style&index=0&id=b2bfc3c8&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2bfc3c8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}