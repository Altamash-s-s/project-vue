(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{1015:function(e,t,r){"use strict";r.r(t);var n=r(2),o=(r(5),r(0)),l=r(530),c=r(206),d=r(633),f=Object(o.b)({name:"AddressNew",components:{SfTabs:l.a,AddressForm:d.a},setup:function(){var e=Object(o.s)(),t=Object(o.v)(),r=Object(c.a)(),l=function(){var o=Object(n.a)(regeneratorRuntime.mark((function n(o){var form;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return form=o.form,n.next=3,r.save({address:form});case 3:return n.next=5,t.push(e.localeRoute({name:"customer-addresses-details"}));case 5:case"end":return n.stop()}}),n)})));return function(e){return o.apply(this,arguments)}}();return{createAddress:l}}}),m=f,_=(r(793),r(9)),component=Object(_.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[r("SfTabs",{staticClass:"tab-orphan"},[r("SfTab",{attrs:{title:e.$t("Add the address")}},[r("p",{directives:[{name:"t",rawName:"v-t",value:"Contact details updated",expression:"'Contact details updated'"}],staticClass:"message"}),e._v(" "),r("AddressForm",{on:{submit:e.createAddress},scopedSlots:e._u([{key:"submit-button-content",fn:function(){return[e._v("\n          "+e._s(e.$t("Add the address"))+"\n        ")]},proxy:!0}])})],1)],1)],1)}),[],!1,null,"41fe933d",null);t.default=component.exports},521:function(e,t,r){"use strict";r(20),r(15),r(21);t.a={countriesList:function(e){return e.filter((function(e){return e.id&&e.full_name_english&&e.full_name_locale})).map((function(e){return{id:e.id,label:e.full_name_locale,englishLabel:e.full_name_english,abbreviation:e.two_letter_abbreviation}})).sort((function(a,b){return a.label.localeCompare(b.label)}))},regionList:function(e){return(null==e?void 0:e.available_regions)?e.available_regions.filter((function(e){return e.id&&e.code&&e.name})).map((function(e){return{id:e.id,label:e.name,abbreviation:e.code}})).sort((function(a,b){return a.label.localeCompare(b.label)})):[]}}},557:function(e,t,r){},606:function(e,t,r){"use strict";r(557)},633:function(e,t,r){"use strict";r(14),r(12),r(15),r(16),r(17);var n=r(2),o=r(4),l=(r(5),r(44),r(58),r(209)),c=r(49),d=r(588),f=r(532),m=r(485),_=r(483),v=r(0),h=r(665),y=r.n(h),S=r(30),O=r(521);function $(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}Object(_.c)("required",k(k({},m.f),{},{message:"This field is required"})),Object(_.c)("min",k(k({},m.d),{},{message:"The field should have at least {length} characters"})),Object(_.c)("oneOf",k(k({},m.e),{},{message:"Invalid country"}));var j=Object(v.b)({name:"AddressForm",components:{SfInput:l.a,SfButton:c.a,SfSelect:d.a,SfCheckbox:f.a,ValidationProvider:_.b,ValidationObserver:_.a},props:{address:{type:Object,default:function(){return{apartment:"",city:"",country_code:"",firstname:"",lastname:"",postcode:"",region:{region_code:"",region_id:0},street:"",telephone:"",default_shipping:!1,default_billing:!1}}},loading:{type:Boolean,default:!1}},setup:function(e,t){var r=t.emit,o=Object(S.e)(),l=o.load,c=o.search,form=Object(v.l)(null),d=Object(v.l)([]),f=Object(v.a)((function(){return O.a.countriesList(d.value)})),m=Object(v.l)(null),_=Object(v.a)((function(){return O.a.regionList(m.value)})),h=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:m.value=e.sent,form.value.region={region_id:null,region_code:""};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(v.w)((function(){return e.address}),(function(){form.value={apartment:e.address.apartment,city:e.address.city,country_code:e.address.country_code,firstname:e.address.firstname,lastname:e.address.lastname,postcode:e.address.postcode,region:k({region_code:"",region_id:null},e.address.region),street:e.address.street,telephone:e.address.telephone,default_shipping:e.address.default_shipping||!1,default_billing:e.address.default_billing||!1}}),{immediate:!0});return Object(v.f)(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:if(d.value=t.sent,!e.address.country_code){t.next=7;break}return t.next=6,c({id:e.address.country_code});case 6:m.value=t.sent;case 7:case"end":return t.stop()}}),t)})))),{form:form,submitForm:function(){var e,t=null===(e=_.value.find((function(e){return e.abbreviation===form.value.region.region_code})))||void 0===e?void 0:e.id;form.value.region=t?{region_id:t}:k(k({},form.value.region),{},{region_code:"",region_id:null}),r("submit",{form:y()(form.value,["__typename"]),onError:function(){}})},countriesList:f,regionInformation:_,updateCountry:h}}}),x=j,C=(r(606),r(9)),component=Object(C.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[r("form",{staticClass:"form",attrs:{id:"shipping-details-form"},on:{submit:function(t){return t.preventDefault(),n(e.submitForm)}}},[r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2",name:"firstname"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"firstname",label:e.$t("First Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.firstname,callback:function(t){e.$set(e.form,"firstname",t)},expression:"form.firstname"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2",name:"lastname"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"lastname",label:e.$t("Last Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.lastname,callback:function(t){e.$set(e.form,"lastname",t)},expression:"form.lastname"}})]}}],null,!0)})],1),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required",name:"street"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"street",label:e.$t("Street Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.street,callback:function(t){e.$set(e.form,"street",t)},expression:"form.street"}})]}}],null,!0)}),e._v(" "),r("SfInput",{staticClass:"form__element",attrs:{name:"apartment",label:e.$t("House/Apartment number"),required:""},model:{value:e.form.apartment,callback:function(t){e.$set(e.form,"apartment",t)},expression:"form.apartment"}}),e._v(" "),r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"city",label:e.$t("City"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{name:"region",rules:e.form.country_code&&0!==e.regionInformation.length?"required|min:2":null},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e.form.country_code&&0!==e.regionInformation.length?r("SfSelect",{directives:[{name:"e2e",rawName:"v-e2e",value:"shipping-state",expression:"'shipping-state'"}],staticClass:"form__element form__element--half form__element--half-even form__select sf-select--underlined",attrs:{label:e.$t("State/Province"),name:"state",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.region.region_code,callback:function(t){e.$set(e.form.region,"region_code",t)},expression:"form.region.region_code"}},e._l(e.regionInformation,(function(t){return r("SfSelectOption",{key:t.id,attrs:{value:t.abbreviation}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1):r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"shipping-state",expression:"'shipping-state'"}],attrs:{label:e.$t("State/Province"),name:"state",valid:!!e.form.country_code,"error-message":e.form.country_code?"":e.$t("Please select a country first"),disabled:!e.form.country_code||e.loading},model:{value:e.form.region.region,callback:function(t){e.$set(e.form.region,"region",t)},expression:"form.region.region"}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:4",name:"postcode"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"postcode",label:e.$t("Zip-code"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.postcode,callback:function(t){e.$set(e.form,"postcode",t)},expression:"form.postcode"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"country_code",rules:"required|min:2",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfSelect",{staticClass:"form__select sf-select--underlined",attrs:{label:e.$t("Country"),name:"country",required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},on:{input:function(t){return e.updateCountry({id:t})}},model:{value:e.form.country_code,callback:function(t){e.$set(e.form,"country_code",t)},expression:"form.country_code"}},[r("SfSelectOption",{attrs:{value:""}}),e._v(" "),e._l(e.countriesList,(function(t){return r("SfSelectOption",{key:t.id,attrs:{value:t.abbreviation}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))],2)]}}],null,!0)})],1),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:8",name:"telephone"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"telephone",label:e.$t("Phone number"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})]}}],null,!0)}),e._v(" "),r("SfCheckbox",{staticClass:"form__checkbox-isDefaultShipping",attrs:{name:"isDefaultShipping",label:e.$t("Set as default shipping"),disabled:e.loading},model:{value:e.form.default_shipping,callback:function(t){e.$set(e.form,"default_shipping",t)},expression:"form.default_shipping"}}),e._v(" "),r("SfCheckbox",{staticClass:"form__checkbox-isDefaultBilling",attrs:{name:"isDefaultBilling",label:e.$t("Set as default billing"),disabled:e.loading},model:{value:e.form.default_billing,callback:function(t){e.$set(e.form,"default_billing",t)},expression:"form.default_billing"}}),e._v(" "),r("SfButton",{staticClass:"form__button",attrs:{type:"submit",disabled:e.loading}},[e._t("submit-button-content")],2)],1)]}}],null,!0)})}),[],!1,null,"f2d39966",null);t.a=component.exports},667:function(e,t,r){},793:function(e,t,r){"use strict";r(667)}}]);
//# sourceMappingURL=9af0efe.js.map