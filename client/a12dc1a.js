(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{1016:function(e,t,r){"use strict";r.r(t);var n=r(4),o=r(2),l=(r(5),r(162),r(37),r(58),r(14),r(12),r(15),r(16),r(17),r(0)),c=r(530),d=r(633),f=r(206),m=r(513);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y=Object(l.b)({name:"AddressEdit",components:{SfTabs:c.a,AddressForm:d.a},props:{addressId:{type:String,required:!0}},setup:function(e){var t=Object(l.v)(),r=Object(l.s)(),n=Object(f.a)(),c=n.load,d=n.update,address=Object(l.l)(null),v=Number.parseInt(e.addressId,10);Object(l.t)(Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:t=e.sent,address.value=m.a.getAddresses(t).find((function(e){return e.id===v}));case 4:case"end":return e.stop()}}),e)}))));var y=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){var form;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return form=n.form,e.next=3,d({address:_(_({},form),{},{id:v})});case 3:return e.next=5,t.push(r.localeRoute({name:"customer-addresses-details"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{address:address,update:y}}}),h=y,O=(r(795),r(9)),component=Object(O.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[r("SfTabs",{staticClass:"tab-orphan"},[r("SfTab",{attrs:{title:e.$t("Update the address")}},[r("p",{directives:[{name:"t",rawName:"v-t",value:"Contact details updated",expression:"'Contact details updated'"}],staticClass:"message"}),e._v(" "),r("AddressForm",{attrs:{address:e.address||void 0,loading:e.$fetchState.pending},on:{submit:e.update},scopedSlots:e._u([{key:"submit-button-content",fn:function(){return[e._v("\n          "+e._s(e.$t("Update the address"))+"\n        ")]},proxy:!0}])})],1)],1)],1)}),[],!1,null,"54923a00",null);t.default=component.exports},513:function(e,t,r){"use strict";var n=r(11),o=(r(20),r(14),r(87),r(15),r(82)),l={getAddresses:function(e,t){var r,l;if(!e||0===e.length||!Array.isArray(e))return[];var c=null===(l=null===(r=null==e?void 0:e.map((function(a){return Object(o.b)(a)})))||void 0===r?void 0:r.sort((function(a,b){return a.default_shipping===b.default_shipping?0:a.default_shipping?-1:1})))||void 0===l?void 0:l.sort((function(a,b){return a.default_billing===b.default_billing?0:a.default_billing?-1:1}));if(!t||0===Object.keys(t).length)return c;var d=Object.entries(t);return c.filter((function(address){return d.every((function(e){var t=Object(n.a)(e,2),r=t[0],o=t[1];return address[r]===o}))}))},getTotal:function(e){return e.length},getPostCode:function(address){return(null==address?void 0:address.postcode)||""},getStreetName:function(address){return Array.isArray(null==address?void 0:address.street)?null==address?void 0:address.street[0]:null==address?void 0:address.street},getCity:function(address){return(null==address?void 0:address.city)||""},getFirstName:function(address){return(null==address?void 0:address.firstname)||""},getLastName:function(address){return(null==address?void 0:address.lastname)||""},getCountry:function(address){return(null==address?void 0:address.country_code)||""},getPhone:function(address){return(null==address?void 0:address.telephone)||""},getEmail:function(address){return(null==address?void 0:address.email)||""},getApartmentNumber:function(address){return Array.isArray(null==address?void 0:address.street)?null==address?void 0:address.street[1]:null==address?void 0:address.apartment},getProvince:function(address){var e,t;return(null===(e=null==address?void 0:address.region)||void 0===e?void 0:e.region)||(null===(t=null==address?void 0:address.region)||void 0===t?void 0:t.region_code)||""},getCompanyName:function(address){return(null==address?void 0:address.company)||""},getTaxNumber:function(address){return(null==address?void 0:address.vat_id)||""},getId:function(address){return(null==address?void 0:address.id)||""},getNeighborhood:function(address){return Array.isArray(null==address?void 0:address.street)?null==address?void 0:address.street[2]:null==address?void 0:address.neighborhood},getAddressExtra:function(address){return Array.isArray(null==address?void 0:address.street)?null==address?void 0:address.street[3]:null==address?void 0:address.extra},isDefault:function(address){return(null==address?void 0:address.default_shipping)||(null==address?void 0:address.default_billing)||!1},isDefaultShipping:function(address){return(null==address?void 0:address.default_shipping)||!1},isDefaultBilling:function(address){return(null==address?void 0:address.default_billing)||!1}};t.a=l},521:function(e,t,r){"use strict";r(20),r(15),r(21);t.a={countriesList:function(e){return e.filter((function(e){return e.id&&e.full_name_english&&e.full_name_locale})).map((function(e){return{id:e.id,label:e.full_name_locale,englishLabel:e.full_name_english,abbreviation:e.two_letter_abbreviation}})).sort((function(a,b){return a.label.localeCompare(b.label)}))},regionList:function(e){return(null==e?void 0:e.available_regions)?e.available_regions.filter((function(e){return e.id&&e.code&&e.name})).map((function(e){return{id:e.id,label:e.name,abbreviation:e.code}})).sort((function(a,b){return a.label.localeCompare(b.label)})):[]}}},557:function(e,t,r){},606:function(e,t,r){"use strict";r(557)},633:function(e,t,r){"use strict";r(14),r(12),r(15),r(16),r(17);var n=r(2),o=r(4),l=(r(5),r(44),r(58),r(209)),c=r(49),d=r(588),f=r(532),m=r(485),v=r(483),_=r(0),y=r(665),h=r.n(y),O=r(30),S=r(521);function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}Object(v.c)("required",k(k({},m.f),{},{message:"This field is required"})),Object(v.c)("min",k(k({},m.d),{},{message:"The field should have at least {length} characters"})),Object(v.c)("oneOf",k(k({},m.e),{},{message:"Invalid country"}));var $=Object(_.b)({name:"AddressForm",components:{SfInput:l.a,SfButton:c.a,SfSelect:d.a,SfCheckbox:f.a,ValidationProvider:v.b,ValidationObserver:v.a},props:{address:{type:Object,default:function(){return{apartment:"",city:"",country_code:"",firstname:"",lastname:"",postcode:"",region:{region_code:"",region_id:0},street:"",telephone:"",default_shipping:!1,default_billing:!1}}},loading:{type:Boolean,default:!1}},setup:function(e,t){var r=t.emit,o=Object(O.e)(),l=o.load,c=o.search,form=Object(_.l)(null),d=Object(_.l)([]),f=Object(_.a)((function(){return S.a.countriesList(d.value)})),m=Object(_.l)(null),v=Object(_.a)((function(){return S.a.regionList(m.value)})),y=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:m.value=e.sent,form.value.region={region_id:null,region_code:""};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(_.w)((function(){return e.address}),(function(){form.value={apartment:e.address.apartment,city:e.address.city,country_code:e.address.country_code,firstname:e.address.firstname,lastname:e.address.lastname,postcode:e.address.postcode,region:k({region_code:"",region_id:null},e.address.region),street:e.address.street,telephone:e.address.telephone,default_shipping:e.address.default_shipping||!1,default_billing:e.address.default_billing||!1}}),{immediate:!0});return Object(_.f)(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:if(d.value=t.sent,!e.address.country_code){t.next=7;break}return t.next=6,c({id:e.address.country_code});case 6:m.value=t.sent;case 7:case"end":return t.stop()}}),t)})))),{form:form,submitForm:function(){var e,t=null===(e=v.value.find((function(e){return e.abbreviation===form.value.region.region_code})))||void 0===e?void 0:e.id;form.value.region=t?{region_id:t}:k(k({},form.value.region),{},{region_code:"",region_id:null}),r("submit",{form:h()(form.value,["__typename"]),onError:function(){}})},countriesList:f,regionInformation:v,updateCountry:y}}}),x=$,C=(r(606),r(9)),component=Object(C.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[r("form",{staticClass:"form",attrs:{id:"shipping-details-form"},on:{submit:function(t){return t.preventDefault(),n(e.submitForm)}}},[r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2",name:"firstname"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"firstname",label:e.$t("First Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.firstname,callback:function(t){e.$set(e.form,"firstname",t)},expression:"form.firstname"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2",name:"lastname"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"lastname",label:e.$t("Last Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.lastname,callback:function(t){e.$set(e.form,"lastname",t)},expression:"form.lastname"}})]}}],null,!0)})],1),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required",name:"street"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"street",label:e.$t("Street Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.street,callback:function(t){e.$set(e.form,"street",t)},expression:"form.street"}})]}}],null,!0)}),e._v(" "),r("SfInput",{staticClass:"form__element",attrs:{name:"apartment",label:e.$t("House/Apartment number"),required:""},model:{value:e.form.apartment,callback:function(t){e.$set(e.form,"apartment",t)},expression:"form.apartment"}}),e._v(" "),r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"city",label:e.$t("City"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{name:"region",rules:e.form.country_code&&0!==e.regionInformation.length?"required|min:2":null},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e.form.country_code&&0!==e.regionInformation.length?r("SfSelect",{directives:[{name:"e2e",rawName:"v-e2e",value:"shipping-state",expression:"'shipping-state'"}],staticClass:"form__element form__element--half form__element--half-even form__select sf-select--underlined",attrs:{label:e.$t("State/Province"),name:"state",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.region.region_code,callback:function(t){e.$set(e.form.region,"region_code",t)},expression:"form.region.region_code"}},e._l(e.regionInformation,(function(t){return r("SfSelectOption",{key:t.id,attrs:{value:t.abbreviation}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1):r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"shipping-state",expression:"'shipping-state'"}],attrs:{label:e.$t("State/Province"),name:"state",valid:!!e.form.country_code,"error-message":e.form.country_code?"":e.$t("Please select a country first"),disabled:!e.form.country_code||e.loading},model:{value:e.form.region.region,callback:function(t){e.$set(e.form.region,"region",t)},expression:"form.region.region"}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:4",name:"postcode"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"postcode",label:e.$t("Zip-code"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.postcode,callback:function(t){e.$set(e.form,"postcode",t)},expression:"form.postcode"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"country_code",rules:"required|min:2",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfSelect",{staticClass:"form__select sf-select--underlined",attrs:{label:e.$t("Country"),name:"country",required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},on:{input:function(t){return e.updateCountry({id:t})}},model:{value:e.form.country_code,callback:function(t){e.$set(e.form,"country_code",t)},expression:"form.country_code"}},[r("SfSelectOption",{attrs:{value:""}}),e._v(" "),e._l(e.countriesList,(function(t){return r("SfSelectOption",{key:t.id,attrs:{value:t.abbreviation}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))],2)]}}],null,!0)})],1),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:8",name:"telephone"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"telephone",label:e.$t("Phone number"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})]}}],null,!0)}),e._v(" "),r("SfCheckbox",{staticClass:"form__checkbox-isDefaultShipping",attrs:{name:"isDefaultShipping",label:e.$t("Set as default shipping"),disabled:e.loading},model:{value:e.form.default_shipping,callback:function(t){e.$set(e.form,"default_shipping",t)},expression:"form.default_shipping"}}),e._v(" "),r("SfCheckbox",{staticClass:"form__checkbox-isDefaultBilling",attrs:{name:"isDefaultBilling",label:e.$t("Set as default billing"),disabled:e.loading},model:{value:e.form.default_billing,callback:function(t){e.$set(e.form,"default_billing",t)},expression:"form.default_billing"}}),e._v(" "),r("SfButton",{staticClass:"form__button",attrs:{type:"submit",disabled:e.loading}},[e._t("submit-button-content")],2)],1)]}}],null,!0)})}),[],!1,null,"f2d39966",null);t.a=component.exports},669:function(e,t,r){},795:function(e,t,r){"use strict";r(669)}}]);
//# sourceMappingURL=a12dc1a.js.map