(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{438:function(e,t,r){"use strict";r(51),r(10),r(11);var n=r(56),o={getAddresses:(e,t)=>{var r,o;if(!e||0===e.length||!Array.isArray(e))return[];var l=null===(o=null===(r=null==e?void 0:e.map((a=>Object(n.b)(a))))||void 0===r?void 0:r.sort(((a,b)=>a.default_shipping===b.default_shipping?0:a.default_shipping?-1:1)))||void 0===o?void 0:o.sort(((a,b)=>a.default_billing===b.default_billing?0:a.default_billing?-1:1));if(!t||0===Object.keys(t).length)return l;var d=Object.entries(t);return l.filter((address=>d.every((e=>{var[t,r]=e;return address[t]===r}))))},getTotal:e=>e.length,getPostCode:address=>(null==address?void 0:address.postcode)||"",getStreetName:address=>Array.isArray(null==address?void 0:address.street)?null==address?void 0:address.street[0]:null==address?void 0:address.street,getCity:address=>(null==address?void 0:address.city)||"",getFirstName:address=>(null==address?void 0:address.firstname)||"",getLastName:address=>(null==address?void 0:address.lastname)||"",getCountry:address=>(null==address?void 0:address.country_code)||"",getPhone:address=>(null==address?void 0:address.telephone)||"",getEmail:address=>(null==address?void 0:address.email)||"",getApartmentNumber:address=>Array.isArray(null==address?void 0:address.street)?null==address?void 0:address.street[1]:null==address?void 0:address.apartment,getProvince:address=>{var e,t;return(null===(e=null==address?void 0:address.region)||void 0===e?void 0:e.region)||(null===(t=null==address?void 0:address.region)||void 0===t?void 0:t.region_code)||""},getCompanyName:address=>(null==address?void 0:address.company)||"",getTaxNumber:address=>(null==address?void 0:address.vat_id)||"",getId:address=>(null==address?void 0:address.id)||"",getNeighborhood:address=>Array.isArray(null==address?void 0:address.street)?null==address?void 0:address.street[2]:null==address?void 0:address.neighborhood,getAddressExtra:address=>Array.isArray(null==address?void 0:address.street)?null==address?void 0:address.street[3]:null==address?void 0:address.extra,isDefault:address=>(null==address?void 0:address.default_shipping)||(null==address?void 0:address.default_billing)||!1,isDefaultShipping:address=>(null==address?void 0:address.default_shipping)||!1,isDefaultBilling:address=>(null==address?void 0:address.default_billing)||!1};t.a=o},446:function(e,t,r){"use strict";r(51);t.a={countriesList:e=>e.filter((e=>e.id&&e.full_name_english&&e.full_name_locale)).map((e=>({id:e.id,label:e.full_name_locale,englishLabel:e.full_name_english,abbreviation:e.two_letter_abbreviation}))).sort(((a,b)=>a.label.localeCompare(b.label))),regionList:e=>(null==e?void 0:e.available_regions)?e.available_regions.filter((e=>e.id&&e.code&&e.name)).map((e=>({id:e.id,label:e.name,abbreviation:e.code}))).sort(((a,b)=>a.label.localeCompare(b.label))):[]}},482:function(e,t,r){},528:function(e,t,r){"use strict";r(482)},555:function(e,t,r){"use strict";r(9);var n=r(2),o=r(5),l=(r(23),r(152)),d=r(27),c=r(511),f=r(457),m=r(410),v=r(408),_=r(0),y=r(587),h=r.n(y),O=r(15),S=r(446);function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function $(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}Object(v.c)("required",$($({},m.f),{},{message:"This field is required"})),Object(v.c)("min",$($({},m.d),{},{message:"The field should have at least {length} characters"})),Object(v.c)("oneOf",$($({},m.e),{},{message:"Invalid country"}));var k=Object(_.b)({name:"AddressForm",components:{SfInput:l.a,SfButton:d.a,SfSelect:c.a,SfCheckbox:f.a,ValidationProvider:v.b,ValidationObserver:v.a},props:{address:{type:Object,default:()=>({apartment:"",city:"",country_code:"",firstname:"",lastname:"",postcode:"",region:{region_code:"",region_id:0},street:"",telephone:"",default_shipping:!1,default_billing:!1})},loading:{type:Boolean,default:!1}},setup(e,t){var{emit:r}=t,{load:o,search:l}=Object(O.e)(),form=Object(_.l)(null),d=Object(_.l)([]),c=Object(_.a)((()=>S.a.countriesList(d.value))),f=Object(_.l)(null),m=Object(_.a)((()=>S.a.regionList(f.value))),v=function(){var e=Object(n.a)((function*(e){f.value=yield l(e),form.value.region={region_id:null,region_code:""}}));return function(t){return e.apply(this,arguments)}}();Object(_.w)((()=>e.address),(()=>{form.value={apartment:e.address.apartment,city:e.address.city,country_code:e.address.country_code,firstname:e.address.firstname,lastname:e.address.lastname,postcode:e.address.postcode,region:$({region_code:"",region_id:null},e.address.region),street:e.address.street,telephone:e.address.telephone,default_shipping:e.address.default_shipping||!1,default_billing:e.address.default_billing||!1}}),{immediate:!0});return Object(_.f)(Object(n.a)((function*(){d.value=yield o(),e.address.country_code&&(f.value=yield l({id:e.address.country_code}))}))),{form:form,submitForm:()=>{var e,t=null===(e=m.value.find((e=>e.abbreviation===form.value.region.region_code)))||void 0===e?void 0:e.id;form.value.region=t?{region_id:t}:$($({},form.value.region),{},{region_code:"",region_id:null}),r("submit",{form:h()(form.value,["__typename"]),onError:()=>{}})},countriesList:c,regionInformation:m,updateCountry:v}}}),C=k,P=(r(528),r(8)),component=Object(P.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[r("form",{staticClass:"form",attrs:{id:"shipping-details-form"},on:{submit:function(t){return t.preventDefault(),n(e.submitForm)}}},[r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2",name:"firstname"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"firstname",label:e.$t("First Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.firstname,callback:function(t){e.$set(e.form,"firstname",t)},expression:"form.firstname"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2",name:"lastname"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"lastname",label:e.$t("Last Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.lastname,callback:function(t){e.$set(e.form,"lastname",t)},expression:"form.lastname"}})]}}],null,!0)})],1),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required",name:"street"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"street",label:e.$t("Street Name"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.street,callback:function(t){e.$set(e.form,"street",t)},expression:"form.street"}})]}}],null,!0)}),e._v(" "),r("SfInput",{staticClass:"form__element",attrs:{name:"apartment",label:e.$t("House/Apartment number"),required:""},model:{value:e.form.apartment,callback:function(t){e.$set(e.form,"apartment",t)},expression:"form.apartment"}}),e._v(" "),r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:2"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"city",label:e.$t("City"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{name:"region",rules:e.form.country_code&&0!==e.regionInformation.length?"required|min:2":null},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e.form.country_code&&0!==e.regionInformation.length?r("SfSelect",{directives:[{name:"e2e",rawName:"v-e2e",value:"shipping-state",expression:"'shipping-state'"}],staticClass:"form__element form__element--half form__element--half-even form__select sf-select--underlined",attrs:{label:e.$t("State/Province"),name:"state",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.region.region_code,callback:function(t){e.$set(e.form.region,"region_code",t)},expression:"form.region.region_code"}},e._l(e.regionInformation,(function(t){return r("SfSelectOption",{key:t.id,attrs:{value:t.abbreviation}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1):r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"shipping-state",expression:"'shipping-state'"}],attrs:{label:e.$t("State/Province"),name:"state",valid:!!e.form.country_code,"error-message":e.form.country_code?"":e.$t("Please select a country first"),disabled:!e.form.country_code||e.loading},model:{value:e.form.region.region,callback:function(t){e.$set(e.form.region,"region",t)},expression:"form.region.region"}})]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form__horizontal"},[r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:4",name:"postcode"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"postcode",label:e.$t("Zip-code"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.postcode,callback:function(t){e.$set(e.form,"postcode",t)},expression:"form.postcode"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"country_code",rules:"required|min:2",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfSelect",{staticClass:"form__select sf-select--underlined",attrs:{label:e.$t("Country"),name:"country",required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},on:{input:function(t){return e.updateCountry({id:t})}},model:{value:e.form.country_code,callback:function(t){e.$set(e.form,"country_code",t)},expression:"form.country_code"}},[r("SfSelectOption",{attrs:{value:""}}),e._v(" "),e._l(e.countriesList,(function(t){return r("SfSelectOption",{key:t.id,attrs:{value:t.abbreviation}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))],2)]}}],null,!0)})],1),e._v(" "),r("ValidationProvider",{staticClass:"form__element",attrs:{rules:"required|min:8",name:"telephone"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{attrs:{name:"telephone",label:e.$t("Phone number"),required:"",valid:!n[0],"error-message":e.$t(n[0]),disabled:e.loading},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})]}}],null,!0)}),e._v(" "),r("SfCheckbox",{staticClass:"form__checkbox-isDefaultShipping",attrs:{name:"isDefaultShipping",label:e.$t("Set as default shipping"),disabled:e.loading},model:{value:e.form.default_shipping,callback:function(t){e.$set(e.form,"default_shipping",t)},expression:"form.default_shipping"}}),e._v(" "),r("SfCheckbox",{staticClass:"form__checkbox-isDefaultBilling",attrs:{name:"isDefaultBilling",label:e.$t("Set as default billing"),disabled:e.loading},model:{value:e.form.default_billing,callback:function(t){e.$set(e.form,"default_billing",t)},expression:"form.default_billing"}}),e._v(" "),r("SfButton",{staticClass:"form__button",attrs:{type:"submit",disabled:e.loading}},[e._t("submit-button-content")],2)],1)]}}],null,!0)})}),[],!1,null,"f2d39966",null);t.a=component.exports},591:function(e,t,r){},718:function(e,t,r){"use strict";r(591)},930:function(e,t,r){"use strict";r.r(t);r(9);var n=r(5),o=r(2),l=r(0),d=r(455),c=r(555),f=r(149),m=r(438);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y=Object(l.b)({name:"AddressEdit",components:{SfTabs:d.a,AddressForm:c.a},props:{addressId:{type:String,required:!0}},setup(e){var t=Object(l.v)(),r=Object(l.s)(),{load:n,update:d}=Object(f.a)(),address=Object(l.l)(null),c=Number.parseInt(e.addressId,10);Object(l.t)(Object(o.a)((function*(){var e=yield n();address.value=m.a.getAddresses(e).find((e=>{var{id:t}=e;return t===c}))})));var v=function(){var e=Object(o.a)((function*(e){var{form:form}=e;yield d({address:_(_({},form),{},{id:c})}),yield t.push(r.localeRoute({name:"customer-addresses-details"}))}));return function(t){return e.apply(this,arguments)}}();return{address:address,update:v}}}),h=y,O=(r(718),r(8)),component=Object(O.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[r("SfTabs",{staticClass:"tab-orphan"},[r("SfTab",{attrs:{title:e.$t("Update the address")}},[r("p",{directives:[{name:"t",rawName:"v-t",value:"Contact details updated",expression:"'Contact details updated'"}],staticClass:"message"}),e._v(" "),r("AddressForm",{attrs:{address:e.address||void 0,loading:e.$fetchState.pending},on:{submit:e.update},scopedSlots:e._u([{key:"submit-button-content",fn:function(){return[e._v("\n          "+e._s(e.$t("Update the address"))+"\n        ")]},proxy:!0}])})],1)],1)],1)}),[],!1,null,"54923a00",null);t.default=component.exports}}]);
//# sourceMappingURL=39c264d.modern.js.map