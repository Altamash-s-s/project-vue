(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{737:function(t,e,r){},741:function(t,e,r){},947:function(t,e,r){"use strict";r(737)},951:function(t,e,r){"use strict";r(741)},987:function(t,e,r){"use strict";r.r(e);var n,o=r(2),l=(r(5),r(15),r(0)),c=r(305),d=r(199),f=r(996),v=r(1029),_=r(49),y=r(533),O=r(134),C=r(508),m=r(30),F=(r(14),r(12),r(16),r(17),r(4));r(58),r(20);!function(t){t.RADIO="RadioType",t.CHECKBOX="CheckboxType",t.SWATCH_COLOR="SwatchColorType",t.YES_NO="YesNoType",t.DEFAULT="CheckboxType"}(n||(n={}));var h,S=n;function w(){return[{attrCode:"price",type:h.RADIO,component:S.RADIO},{attrCode:"size"},{attrCode:"material"},{attrCode:"strap_bags"},{attrCode:"style_bottom"},{attrCode:"color",type:h.SWATCH_COLOR,component:S.SWATCH_COLOR},{attrCode:"new",type:h.YES_NO,component:S.YES_NO},{attrCode:"sale",type:h.YES_NO,component:S.YES_NO}]}function j(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(e){Object(F.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}!function(t){t.RADIO="radio",t.CHECKBOX="checkbox",t.SWATCH_COLOR="swatch_color",t.YES_NO="yes_no"}(h||(h={}));var R,E=function(t){var e,r={attrCode:t,type:h.CHECKBOX,component:S.CHECKBOX,disabled:!1},n=null!==(e=w().find((function(e){return e.attrCode===t})))&&void 0!==e?e:{};return k(k({},r),n)},A=(r(21),r(449)),x=r(50),L=r(492),T=Object(l.b)({components:{HTMLContent:L.a,SfBadge:A.a,SfIcon:x.a},props:{removableFilters:{type:Array,default:function(){return[]}}},setup:function(){var t=Object(l.s)().app.i18n;return{getLabel:function(filter){if(filter.type===h.YES_NO){var e="1"===filter.label?t.t("Yes"):t.t("No");return"".concat(filter.name,": ").concat(e)}return filter.label}}}}),B=(r(947),r(9)),P=Object(B.a)(T,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"selected-filters-wrapper"},t._l(t.removableFilters,(function(filter,e){return r("SfBadge",{key:e,staticClass:"selected-filter",attrs:{"data-testid":"selected-filter"}},[r("HTMLContent",{staticClass:"selected-filter__label",attrs:{tag:"span",content:t.getLabel(filter)}}),t._v(" "),r("button",{staticClass:"selected-filter__remove",attrs:{type:"button","data-testid":"selected-filter-remove"},on:{click:function(e){return e.preventDefault(),t.$emit("removeFilter",{id:filter.id,value:filter.value})}}},[r("SfIcon",{staticClass:"sf-cross__icon",attrs:{icon:"cross",size:"20px",color:"white",viewBox:"0 0 24 12"}})],1)],1)})),1)}),[],!1,null,null,null).exports,I=r(89),$={execute:(R=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,n,o,l,c,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(I.b)(),l=o.query,t.next=3,l("\n  query getProductFiltersByCategory($categoryIdFilter: FilterEqualTypeInput!) {\n    products(filter: { category_uid: $categoryIdFilter }) {\n      aggregations {\n        label\n        count\n        attribute_code\n        options {\n          count\n          label\n          value\n          __typename\n        }\n        position\n        __typename\n      }\n      __typename\n    }\n  }\n",{categoryIdFilter:e});case 3:return c=t.sent,data=c.data,t.abrupt("return",null!==(n=null===(r=null==data?void 0:data.products)||void 0===r?void 0:r.aggregations)&&void 0!==n?n:[]);case 6:case"end":return t.stop()}}),t)}))),function(t){return R.apply(this,arguments)})};r(60),r(33);function D(){var t=Object(m.n)().getFacetsFromURL,e=function(){var e={},r=t().filters;return Object.keys(r).forEach((function(filter){e[filter]=r[filter]})),e},r=Object(l.l)(e());return{getSelectedFiltersFromUrl:e,isFilterSelected:function(t,e){var n,o=(null!==(n=r.value[t])&&void 0!==n?n:[]).find((function(t){return t===e}));return null!=o?o:""},removeFilter:function(t,e){r.value[t]&&(r.value[t]=r.value[t].filter((function(t){return t!==e})))},selectFilter:function(filter,option){var t,e=E(filter.attribute_code);r.value[filter.attribute_code]||Object(l.m)(r.value,filter.attribute_code,[]),e.type!==h.RADIO&&e.type!==h.YES_NO?r.value[filter.attribute_code].find((function(t){return t===option.value}))?r.value[filter.attribute_code]=null===(t=r.value[filter.attribute_code])||void 0===t?void 0:t.filter((function(t){return t!==option.value})):r.value[filter.attribute_code].push(String(option.value)):r.value[filter.attribute_code]=[option.value]},selectedFilters:r,getRemovableFilters:function(t,e){var r=[];return t.forEach((function(filter){filter.options.forEach((function(option){var t;if((null!==(t=e[filter.attribute_code])&&void 0!==t?t:[]).includes(option.value)){var n=E(filter.attribute_code);r.push({id:filter.attribute_code,name:filter.label,label:option.label,value:option.value,type:n.type})}}))})),r}}}var H=Object(l.b)({name:"CategoryFilters",components:{SelectedFilters:P,SkeletonLoader:C.a,CheckboxType:function(){return r.e(126).then(r.bind(null,1042))},SwatchColorType:function(){return r.e(131).then(r.bind(null,1043))},RadioType:function(){return r.e(119).then(r.bind(null,1044))},YesNoType:function(){return r.e(132).then(r.bind(null,1045))},SfSidebar:c.a,SfHeading:d.a,SfAccordion:f.a,SfFilter:v.a,SfButton:_.a,SfRadio:y.a},props:{isVisible:{type:Boolean,default:!1},catUid:{type:String,required:!0}},setup:function(t,e){var r=e.emit,n=Object(m.n)(),c=n.changeFilters,d=n.clearFilters,f=Object(l.l)([]),v=Object(l.l)([]),_=Object(l.l)(!0),y=D(),C=y.selectedFilters,F=y.selectFilter,h=y.removeFilter,S=y.isFilterSelected,j=y.getRemovableFilters,k=function(){f.value=j(v.value,C.value)};return Object(l.w)((function(){return t.isVisible}),(function(t){t&&Object(l.e)((function(){return Object(l.e)((function(){return Object(O.a)()}))}))})),Object(l.g)(Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.execute({eq:t.catUid});case 2:r=e.sent,v.value=r.filter((function(filter){return t=filter.attribute_code,w().find((function(e){return e.attrCode===t&&!e.disabled}));var t})),k(),_.value=!1;case 6:case"end":return e.stop()}}),e)})))),Object(l.i)("UseFiltersProvider",{isFilterSelected:S,selectedFilters:C,filters:v}),{selectFilter:F,doApplyFilters:function(){c(C.value,!1),k(),(null===window||void 0===window?void 0:window.scroll)&&window.scroll(0,0),r("reloadProducts"),r("close")},doRemoveFilter:function(t){var e=t.id,n=t.value;h(e,n),c(C.value,!1),k(),r("reloadProducts"),r("close")},doClearFilters:function(){d(!1),C.value={},k(),r("reloadProducts"),r("close")},getFilterConfig:E,selectedFilters:C,filters:v,isLoading:_,removableFilters:f}}}),N=(r(951),Object(B.a)(H,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h4",{staticClass:"heading__title h4 desktop-only"},[t._v("\n    "+t._s(t.$t("Filters"))+"\n  ")]),t._v(" "),t.isLoading?r("div",{attrs:{"data-testid":"skeleton-loader"}},t._l(3,(function(e){return r("div",{key:e,staticClass:"desktop-only"},[r("SkeletonLoader",{staticClass:"filters__title sf-heading--left sf-heading",attrs:{height:"20px",width:"85%"}}),t._v(" "),r("SkeletonLoader",{attrs:{width:"50%"}}),t._v(" "),r("SkeletonLoader",{attrs:{width:"62%"}}),t._v(" "),r("SkeletonLoader",{attrs:{width:"40%",height:"10px"}})],1)})),0):r("div",{staticClass:"filters desktop-only"},[r("SelectedFilters",{attrs:{"removable-filters":t.removableFilters},on:{removeFilter:function(e){return t.doRemoveFilter(e)}}}),t._v(" "),r("hr",{staticClass:"sf-divider"}),t._v(" "),t._l(t.filters,(function(filter,i){return r("div",{key:i,attrs:{"data-testid":"category-filter"}},[r(t.getFilterConfig(filter.attribute_code).component,{tag:"component",attrs:{filter:filter},on:{selectFilter:function(e){return t.selectFilter(filter,e)}}})],1)})),t._v(" "),r("div",{staticClass:"filters__buttons"},[r("SfButton",{staticClass:"sf-button--full-width",attrs:{"data-testid":"apply-filters"},on:{click:t.doApplyFilters}},[t._v("\n        "+t._s(t.$t("Apply filters"))+"\n      ")]),t._v(" "),r("SfButton",{staticClass:"sf-button--full-width filters__button-clear",attrs:{"data-testid":"clear-filters"},on:{click:t.doClearFilters}},[t._v("\n        "+t._s(t.$t("Clear all"))+"\n      ")])],1)],2),t._v(" "),r("SfSidebar",{staticClass:"sidebar-filters smartphone-only",attrs:{visible:t.isVisible,title:t.$t("Filters"),"data-testid":"mobile-sidebar"},on:{close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"content-bottom",fn:function(){return[r("div",{staticClass:"filters__buttons"},[r("SfButton",{staticClass:"sf-button--full-width",on:{click:t.doApplyFilters}},[t._v("\n          "+t._s(t.$t("Apply filters"))+"\n        ")]),t._v(" "),r("SfButton",{staticClass:"sf-button--full-width filters__button-clear",on:{click:t.doClearFilters}},[t._v("\n          "+t._s(t.$t("Clear all"))+"\n        ")])],1)]},proxy:!0}])},[r("SfAccordion",{staticClass:"filters smartphone-only"},[r("SelectedFilters",{on:{removeFilter:function(e){return t.doRemoveFilter(e)}}}),t._v(" "),r("hr",{staticClass:"sf-divider"}),t._v(" "),t._l(t.filters,(function(filter,i){return r("div",{key:i},[r("SfAccordionItem",{key:"filter-title-"+filter.attribute_code,staticClass:"filters__accordion-item",attrs:{header:filter.label}},[r(t.getFilterConfig(filter.attribute_code).component,{tag:"component",attrs:{filter:filter},on:{selectFilter:function(e){return t.selectFilter(filter,e)}}})],1)],1)}))],2)],1)],1)}),[],!1,null,"7b996852",null));e.default=N.exports}}]);
//# sourceMappingURL=7901bc0.js.map