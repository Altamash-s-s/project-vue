(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{659:function(e,t,r){},663:function(e,t,r){},866:function(e,t,r){"use strict";r(659)},870:function(e,t,r){"use strict";r(663)},901:function(e,t,r){"use strict";r.r(t);var l,o=r(2),n=r(0),c=r(231),d=r(144),f=r(910),v=r(943),_=r(27),y=r(458),O=r(94),C=r(433),F=r(15),m=(r(9),r(5));!function(e){e.RADIO="RadioType",e.CHECKBOX="CheckboxType",e.SWATCH_COLOR="SwatchColorType",e.YES_NO="YesNoType",e.DEFAULT="CheckboxType"}(l||(l={}));var S,h=l;function w(){return[{attrCode:"price",type:S.RADIO,component:h.RADIO},{attrCode:"size"},{attrCode:"material"},{attrCode:"strap_bags"},{attrCode:"style_bottom"},{attrCode:"color",type:S.SWATCH_COLOR,component:h.SWATCH_COLOR},{attrCode:"new",type:S.YES_NO,component:h.YES_NO},{attrCode:"sale",type:S.YES_NO,component:h.YES_NO}]}function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}!function(e){e.RADIO="radio",e.CHECKBOX="checkbox",e.SWATCH_COLOR="swatch_color",e.YES_NO="yes_no"}(S||(S={}));var E,A=e=>{var t,r={attrCode:e,type:S.CHECKBOX,component:h.CHECKBOX,disabled:!1},l=null!==(t=w().find((t=>t.attrCode===e)))&&void 0!==t?t:{};return k(k({},r),l)},R=r(374),L=r(28),T=r(417),B=Object(n.b)({components:{HTMLContent:T.a,SfBadge:R.a,SfIcon:L.a},props:{removableFilters:{type:Array,default:()=>[]}},setup(){var{app:{i18n:e}}=Object(n.s)();return{getLabel:filter=>{if(filter.type===S.YES_NO){var t="1"===filter.label?e.t("Yes"):e.t("No");return"".concat(filter.name,": ").concat(t)}return filter.label}}}}),x=(r(866),r(8)),P=Object(x.a)(B,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"selected-filters-wrapper"},e._l(e.removableFilters,(function(filter,t){return r("SfBadge",{key:t,staticClass:"selected-filter",attrs:{"data-testid":"selected-filter"}},[r("HTMLContent",{staticClass:"selected-filter__label",attrs:{tag:"span",content:e.getLabel(filter)}}),e._v(" "),r("button",{staticClass:"selected-filter__remove",attrs:{type:"button","data-testid":"selected-filter-remove"},on:{click:function(t){return t.preventDefault(),e.$emit("removeFilter",{id:filter.id,value:filter.value})}}},[r("SfIcon",{staticClass:"sf-cross__icon",attrs:{icon:"cross",size:"20px",color:"white",viewBox:"0 0 24 12"}})],1)],1)})),1)}),[],!1,null,null,null).exports,I=r(63),$={execute:(E=Object(o.a)((function*(e){var t,r,{query:l}=Object(I.b)(),{data:data}=yield l("\n  query getProductFiltersByCategory($categoryIdFilter: FilterEqualTypeInput!) {\n    products(filter: { category_uid: $categoryIdFilter }) {\n      aggregations {\n        label\n        count\n        attribute_code\n        options {\n          count\n          label\n          value\n          __typename\n        }\n        position\n        __typename\n      }\n      __typename\n    }\n  }\n",{categoryIdFilter:e});return null!==(r=null===(t=null==data?void 0:data.products)||void 0===t?void 0:t.aggregations)&&void 0!==r?r:[]})),function(e){return E.apply(this,arguments)})};r(17);function D(){var{getFacetsFromURL:e}=Object(F.n)(),t=()=>{var t={},{filters:r}=e();return Object.keys(r).forEach((filter=>{t[filter]=r[filter]})),t},r=Object(n.l)(t());return{getSelectedFiltersFromUrl:t,isFilterSelected:(e,t)=>{var l,o=(null!==(l=r.value[e])&&void 0!==l?l:[]).find((e=>e===t));return null!=o?o:""},removeFilter:(e,t)=>{r.value[e]&&(r.value[e]=r.value[e].filter((e=>e!==t)))},selectFilter:(filter,option)=>{var e,t=A(filter.attribute_code);r.value[filter.attribute_code]||Object(n.m)(r.value,filter.attribute_code,[]),t.type!==S.RADIO&&t.type!==S.YES_NO?r.value[filter.attribute_code].find((e=>e===option.value))?r.value[filter.attribute_code]=null===(e=r.value[filter.attribute_code])||void 0===e?void 0:e.filter((e=>e!==option.value)):r.value[filter.attribute_code].push(String(option.value)):r.value[filter.attribute_code]=[option.value]},selectedFilters:r,getRemovableFilters:(e,t)=>{var r=[];return e.forEach((filter=>{filter.options.forEach((option=>{var e;if((null!==(e=t[filter.attribute_code])&&void 0!==e?e:[]).includes(option.value)){var l=A(filter.attribute_code);r.push({id:filter.attribute_code,name:filter.label,label:option.label,value:option.value,type:l.type})}}))})),r}}}var H=Object(n.b)({name:"CategoryFilters",components:{SelectedFilters:P,SkeletonLoader:C.a,CheckboxType:()=>r.e(124).then(r.bind(null,956)),SwatchColorType:()=>r.e(129).then(r.bind(null,957)),RadioType:()=>r.e(118).then(r.bind(null,958)),YesNoType:()=>r.e(130).then(r.bind(null,959)),SfSidebar:c.a,SfHeading:d.a,SfAccordion:f.a,SfFilter:v.a,SfButton:_.a,SfRadio:y.a},props:{isVisible:{type:Boolean,default:!1},catUid:{type:String,required:!0}},setup(e,t){var{emit:r}=t,{changeFilters:l,clearFilters:c}=Object(F.n)(),d=Object(n.l)([]),f=Object(n.l)([]),v=Object(n.l)(!0),{selectedFilters:_,selectFilter:y,removeFilter:C,isFilterSelected:m,getRemovableFilters:S}=D(),h=()=>{d.value=S(f.value,_.value)};return Object(n.w)((()=>e.isVisible),(e=>{e&&Object(n.e)((()=>Object(n.e)((()=>Object(O.a)()))))})),Object(n.g)(Object(o.a)((function*(){var t=yield $.execute({eq:e.catUid});f.value=t.filter((filter=>{return e=filter.attribute_code,w().find((t=>t.attrCode===e&&!t.disabled));var e})),h(),v.value=!1}))),Object(n.i)("UseFiltersProvider",{isFilterSelected:m,selectedFilters:_,filters:f}),{selectFilter:y,doApplyFilters:()=>{l(_.value,!1),h(),(null===window||void 0===window?void 0:window.scroll)&&window.scroll(0,0),r("reloadProducts"),r("close")},doRemoveFilter:e=>{var{id:t,value:o}=e;C(t,o),l(_.value,!1),h(),r("reloadProducts"),r("close")},doClearFilters:()=>{c(!1),_.value={},h(),r("reloadProducts"),r("close")},getFilterConfig:A,selectedFilters:_,filters:f,isLoading:v,removableFilters:d}}}),N=(r(870),Object(x.a)(H,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h4",{staticClass:"heading__title h4 desktop-only"},[e._v("\n    "+e._s(e.$t("Filters"))+"\n  ")]),e._v(" "),e.isLoading?r("div",{attrs:{"data-testid":"skeleton-loader"}},e._l(3,(function(t){return r("div",{key:t,staticClass:"desktop-only"},[r("SkeletonLoader",{staticClass:"filters__title sf-heading--left sf-heading",attrs:{height:"20px",width:"85%"}}),e._v(" "),r("SkeletonLoader",{attrs:{width:"50%"}}),e._v(" "),r("SkeletonLoader",{attrs:{width:"62%"}}),e._v(" "),r("SkeletonLoader",{attrs:{width:"40%",height:"10px"}})],1)})),0):r("div",{staticClass:"filters desktop-only"},[r("SelectedFilters",{attrs:{"removable-filters":e.removableFilters},on:{removeFilter:function(t){return e.doRemoveFilter(t)}}}),e._v(" "),r("hr",{staticClass:"sf-divider"}),e._v(" "),e._l(e.filters,(function(filter,i){return r("div",{key:i,attrs:{"data-testid":"category-filter"}},[r(e.getFilterConfig(filter.attribute_code).component,{tag:"component",attrs:{filter:filter},on:{selectFilter:function(t){return e.selectFilter(filter,t)}}})],1)})),e._v(" "),r("div",{staticClass:"filters__buttons"},[r("SfButton",{staticClass:"sf-button--full-width",attrs:{"data-testid":"apply-filters"},on:{click:e.doApplyFilters}},[e._v("\n        "+e._s(e.$t("Apply filters"))+"\n      ")]),e._v(" "),r("SfButton",{staticClass:"sf-button--full-width filters__button-clear",attrs:{"data-testid":"clear-filters"},on:{click:e.doClearFilters}},[e._v("\n        "+e._s(e.$t("Clear all"))+"\n      ")])],1)],2),e._v(" "),r("SfSidebar",{staticClass:"sidebar-filters smartphone-only",attrs:{visible:e.isVisible,title:e.$t("Filters"),"data-testid":"mobile-sidebar"},on:{close:function(t){return e.$emit("close")}},scopedSlots:e._u([{key:"content-bottom",fn:function(){return[r("div",{staticClass:"filters__buttons"},[r("SfButton",{staticClass:"sf-button--full-width",on:{click:e.doApplyFilters}},[e._v("\n          "+e._s(e.$t("Apply filters"))+"\n        ")]),e._v(" "),r("SfButton",{staticClass:"sf-button--full-width filters__button-clear",on:{click:e.doClearFilters}},[e._v("\n          "+e._s(e.$t("Clear all"))+"\n        ")])],1)]},proxy:!0}])},[r("SfAccordion",{staticClass:"filters smartphone-only"},[r("SelectedFilters",{on:{removeFilter:function(t){return e.doRemoveFilter(t)}}}),e._v(" "),r("hr",{staticClass:"sf-divider"}),e._v(" "),e._l(e.filters,(function(filter,i){return r("div",{key:i},[r("SfAccordionItem",{key:"filter-title-"+filter.attribute_code,staticClass:"filters__accordion-item",attrs:{header:filter.label}},[r(e.getFilterConfig(filter.attribute_code).component,{tag:"component",attrs:{filter:filter},on:{selectFilter:function(t){return e.selectFilter(filter,t)}}})],1)],1)}))],2)],1)],1)}),[],!1,null,"7b996852",null));t.default=N.exports}}]);
//# sourceMappingURL=26732ed.modern.js.map