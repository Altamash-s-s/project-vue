(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{1011:function(e,t,r){"use strict";r.r(t);r(14),r(12),r(15),r(16),r(17);var n=r(2),c=r(4),o=(r(5),r(199)),l=r(209),d=r(49),m=r(532),f=r(0),v=r(485),h=r(483),_=r(30),O=r(31),w=r(57),k=r(499),j=r(522);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}Object(h.c)("required",y(y({},v.f),{},{message:"This field is required"})),Object(h.c)("min",y(y({},v.d),{},{message:"The field should have at least {length} characters"})),Object(h.c)("email",y(y({},v.c),{},{message:"Invalid email"})),Object(h.c)("password",{message:j.b,validate:function(e){return j.a.test(e)}});var S=Object(f.b)({name:"UserAccount",components:{SfHeading:o.a,SfInput:l.a,SfButton:d.a,SfCheckbox:m.a,ValidationProvider:h.b,ValidationObserver:h.a},setup:function(){var e=Object(f.v)(),t=Object(f.s)(),r=t.app,c=t.$recaptcha,o=t.$config,l=Object(f.l)(void 0!==c&&o.isRecaptcha),d=Object(_.j)(),m=d.attachToCart,v=d.loading,h=d.error,j=Object(O.a)().cart,x=Object(w.b)(),S=x.load,C=x.loading,A=x.register,N=x.login,U=x.user,P=x.isAuthenticated,$=x.error,M=Object(f.l)(!1),I=Object(f.l)(!1),R=Object(f.l)(!1),E=Object(f.a)((function(){return C.value||v.value})),D=Object(f.a)((function(){return!E.value})),J=Object(f.a)((function(){return $.value.login||$.value.register||h.value.attachToCart})),form=Object(f.l)({firstname:"",lastname:"",email:"",password:"",is_subscribed:!1});return Object(f.t)(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==U.value){e.next=3;break}return e.next=3,S();case 3:P.value&&(form.value.firstname=U.value.firstname,form.value.lastname=U.value.lastname,form.value.email=U.value.email);case 4:case"end":return e.stop()}}),e)})))),Object(f.g)(Object(n.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)("checkout");case 2:(t=e.sent)&&t["user-account"]&&(data=t["user-account"],form.value.email=data.email,form.value.firstname=data.firstname,form.value.lastname=data.lastname);case 4:case"end":return e.stop()}}),e)})))),{canMoveForward:D,createUserAccount:I,errorUser:$,form:form,handleFormSubmit:function(t){return Object(n.a)(regeneratorRuntime.mark((function n(){var o,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l.value&&c.init(),P.value){n.next=10;break}if(!l.value||!I.value){n.next=8;break}return n.next=5,c.getResponse();case 5:o=n.sent,form.value.recaptchaToken=o,form.value.recaptchaInstance=c;case 8:return n.next=10,I.value?A({user:form.value}):m({email:form.value.email,cart:j});case 10:if(!R.value){n.next=18;break}if(d={},!l.value){n.next=16;break}return n.next=15,c.getResponse();case 15:d.recaptchaToken=n.sent;case 16:return n.next=18,N({user:y({email:form.value.email,password:form.value.password},d)});case 18:if(J.value){n.next=25;break}return n.next=21,Object(k.b)("checkout",{"user-account":form.value});case 21:return n.next=23,e.push(r.localeRoute({name:"shipping"}));case 23:t(),M.value=!0;case 25:l.value&&c.reset();case 26:case"end":return n.stop()}}),n)})))},isAuthenticated:P,isFormSubmitted:M,loading:E,loginUserAccount:R,user:U,isRecaptchaEnabled:l}}}),C=(r(775),r(9)),component=Object(C.a)(S,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit,c=t.reset,o=t.validate;return[r("SfHeading",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-heading",expression:"'user-account-heading'"}],staticClass:"sf-heading--left sf-heading--no-underline title",attrs:{level:3,title:e.$t("User Account")}}),e._v(" "),r("form",{attrs:{novalidate:""},on:{submit:function(t){t.preventDefault(),o().then(n(e.handleFormSubmit(c)))}}},[r("div",{staticClass:"form"},[r("ValidationProvider",{attrs:{name:"firstname",rules:e.loginUserAccount?"":"required|min:2",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-firstName",expression:"'user-account-firstName'"}],staticClass:"form__element form__element--half",attrs:{label:e.$t("First Name"),name:"firstName",required:!e.loginUserAccount,disabled:e.loginUserAccount,valid:!n[0],"error-message":e.$t(n[0])},model:{value:e.form.firstname,callback:function(t){e.$set(e.form,"firstname",t)},expression:"form.firstname"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"lastname",rules:e.loginUserAccount?"":"required|min:2",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-lastName",expression:"'user-account-lastName'"}],staticClass:"form__element form__element--half form__element--half-even",attrs:{label:e.$t("Last Name"),name:"lastName",required:!e.loginUserAccount,disabled:e.loginUserAccount,valid:!n[0],"error-message":e.$t(n[0])},model:{value:e.form.lastname,callback:function(t){e.$set(e.form,"lastname",t)},expression:"form.lastname"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"email",rules:"email|required",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-email",expression:"'user-account-email'"}],staticClass:"form__element form__element--half",attrs:{label:e.$t("E-mail"),name:"email",required:"",valid:!n[0],"error-message":e.$t(n[0])},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})]}}],null,!0)}),e._v(" "),e.createUserAccount||e.loginUserAccount?r("ValidationProvider",{attrs:{rules:"required|min:8|password",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-password",expression:"'user-account-password'"}],staticClass:"form__element form__element--half form__element--half-even",attrs:{name:"password",label:"Password",type:"password",required:"","has-show-password":"",valid:!n[0],"error-message":e.$t(n[0])},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})]}}],null,!0)}):e._e(),e._v(" "),e.createUserAccount?r("SfCheckbox",{directives:[{name:"e2e",rawName:"v-e2e",value:"sign-up-newsletter",expression:"'sign-up-newsletter'"}],staticClass:"form__element",attrs:{label:"Sign Up for Newsletter",name:"signupNewsletter"},model:{value:e.form.is_subscribed,callback:function(t){e.$set(e.form,"is_subscribed",t)},expression:"form.is_subscribed"}}):e._e()],1),e._v(" "),e.isAuthenticated?e._e():r("SfCheckbox",{directives:[{name:"e2e",rawName:"v-e2e",value:"create-account",expression:"'create-account'"}],staticClass:"form__element",attrs:{label:"Create an account on the store",name:"createUserAccount",disabled:e.loginUserAccount},model:{value:e.createUserAccount,callback:function(t){e.createUserAccount=t},expression:"createUserAccount"}}),e._v(" "),e.isAuthenticated?e._e():r("SfCheckbox",{directives:[{name:"e2e",rawName:"v-e2e",value:"login-account",expression:"'login-account'"}],staticClass:"form__element",attrs:{label:"Login on the store",name:"loginUserAccount",disabled:e.createUserAccount},model:{value:e.loginUserAccount,callback:function(t){e.loginUserAccount=t},expression:"loginUserAccount"}}),e._v(" "),e.isRecaptchaEnabled?r("recaptcha"):e._e(),e._v(" "),r("div",{staticClass:"form"},[r("div",{staticClass:"form__action"},[r("SfButton",{directives:[{name:"e2e",rawName:"v-e2e",value:"continue-to-shipping",expression:"'continue-to-shipping'"}],staticClass:"form__action-button",attrs:{type:"submit",disabled:!e.canMoveForward}},[e._v("\n          "+e._s(e.$t("Continue to shipping"))+"\n        ")])],1)])],1)]}}])})}),[],!1,null,"17b436e0",null);t.default=component.exports},476:function(e,t,r){},490:function(e,t,r){"use strict";r(476)},499:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"c",(function(){return f})),r.d(t,"b",(function(){return v}));r(14),r(12),r(15),r(16),r(17);var n=r(4);r(13);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l=function(e){return"vsf-".concat(e)},d=function(e,t){return new Promise((function(r,n){try{var c=e();t&&t(null,c),r(c)}catch(e){t&&t(e),n(e)}}))},m=function(e,t){return d((function(){return JSON.parse(window.localStorage.getItem(l(e)))}),t)},f=function(e,t){return d((function(){window.localStorage.removeItem(l(e))}),t)},v=function(e,t,r){return d((function(){return function(e,t){var r=window.localStorage.getItem(e),n=JSON.parse(r),c=t,l=JSON.stringify(o(o({},JSON.parse(JSON.stringify(n))),JSON.parse(JSON.stringify(c))));window.localStorage.setItem(e,l)}(l(e),t)}),r)}},522:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return c}));var n=/(?=.*\d)(?=.*[A-Za-z])(?=.*[!#$%&*?@^_-])(?!.*\s).{8,}/,c="The password must be at least 8 characters long and must contain at least: 1 uppercase or lowercase letter, 1 number, or one special character (E.g. , . _ & ? etc)"},532:function(e,t,r){"use strict";var n=r(27),c=(r(60),r(33),r(22),r(21),r(15),r(50)),o={name:"SfCheckbox",directives:{focus:r(457).a},components:{SfIcon:c.a},model:{prop:"selected",event:"change"},props:{name:{type:String,default:""},value:{type:[String,Boolean],default:""},label:{type:String,default:""},hintMessage:{type:String,default:"Required."},required:{type:Boolean,default:!1},infoMessage:{type:String,default:""},errorMessage:{type:String,default:"This field is not correct."},valid:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},selected:{type:[Array,Boolean],default:function(){return[]}}},computed:{isChecked:function(){return"boolean"==typeof this.selected?this.selected:this.selected.includes(this.value)},computedMessageSlotName:function(){return this.messagesHandler("show-error-message","show-info-message",this.required?"show-hint-message":"")},computedMessage:function(){return this.messagesHandler(this.errorMessage,this.infoMessage,this.required?this.hintMessage:"")},computedMessageClass:function(){return this.messagesHandler("sf-checkbox__message--error","sf-checkbox__message--info",this.required?"sf-checkbox__message--hint":"")},nameWithoutWhitespace:function(){return this.name.replace(/\s/g,"")}},methods:{inputHandler:function(){var e=this;if("boolean"==typeof this.selected)this.$emit("change",!this.selected);else{var t=Object(n.a)(this.selected);t.includes(this.value)?t=t.filter((function(t){return t!==e.value})):t.push(this.value),this.$emit("change",t)}},messagesHandler:function(e,t,r){return this.errorMessage&&!this.valid?e:this.infoMessage&&this.valid?t:this.hintMessage?r:""}}},l=(r(490),r(9)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sf-checkbox",class:{"is-active":e.isChecked,"is-disabled":e.disabled,"has-error":!e.valid,"is-required":e.required},attrs:{"data-testid":e.name}},[r("label",{staticClass:"sf-checkbox__container"},[r("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"sf-checkbox__input",attrs:{type:"checkbox",name:e.name,disabled:e.disabled,"aria-invalid":!e.valid,"aria-required":e.required,"aria-describedby":e.errorMessage?e.nameWithoutWhitespace+"-error":null},domProps:{value:e.value,checked:e.isChecked},on:{change:e.inputHandler}}),e._v(" "),e._t("checkmark",(function(){return[r("span",{staticClass:"sf-checkbox__checkmark",class:{"sf-checkbox__checkmark is-active":e.isChecked}},[r("SfIcon",{class:{"display-none":!e.isChecked},attrs:{icon:"check",color:"white"}})],1)]}),null,{isChecked:e.isChecked,disabled:e.disabled}),e._v(" "),e._t("label",(function(){return[r("span",{staticClass:"sf-checkbox__label",class:{"display-none":!e.label}},[e._v(e._s(e.label))])]}),null,{label:e.label,isChecked:e.isChecked,disabled:e.disabled})],2),e._v(" "),r("div",{staticClass:"sf-checkbox__message"},[r("transition",{attrs:{name:"sf-fade"}},[e.disabled?e._e():e._t(e.computedMessageSlotName,(function(){return[r("div",{class:e.computedMessageClass,attrs:{id:e.nameWithoutWhitespace+"-error","aria-live":"assertive"}},[e._v("\n          "+e._s(e.computedMessage)+"\n        ")])]}),null,{computedMessage:e.computedMessage})],2)],1)])}),[],!1,null,null,null);t.a=component.exports},653:function(e,t,r){},775:function(e,t,r){"use strict";r(653)}}]);
//# sourceMappingURL=58dfdb4.js.map