(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{1004:function(e,t,n){"use strict";n.r(t);var r=n(2),c=(n(5),n(37),n(306)),o=n(49),l=n(0),d=n(465),h={bind:function(e,t){var n=t.value;e._outsideClickHandler=function(t){e.contains(t.target)||(t.stopPropagation(),n(t,e))},document.addEventListener("mousedown",e._outsideClickHandler),document.addEventListener("touchstart",e._outsideClickHandler)},unbind:function(e){document.removeEventListener("mousedown",e._outsideClickHandler),document.removeEventListener("touchstart",e._outsideClickHandler),e._outsideClickHandler=null}},f=n(84),m=n(200),S=Object(l.b)({name:"SearchBar",components:{SfSearchBar:c.a,SfButton:o.a,SvgImage:f.a},directives:{clickOutside:h},props:{isSearchOpen:{type:Boolean,default:!1},itemsPerPage:{type:Number,default:12},minTermLen:{type:Number,default:3}},emits:["set-is-open","set-search-results"],setup:function(e,t){var n=t.emit,c=Object(l.l)(""),o=Object(l.u)(),h=Object(m.a)().getProductList,f=function(){e.isSearchOpen||(n("set-is-open",!0),document&&document.body.classList.add("no-scroll"))},S=function(){e.isSearchOpen&&(n("set-is-open",!1),n("set-search-results",null),document&&document.body.classList.remove("no-scroll"))},k=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.value=r,!(c.value.length<e.minTermLen)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,h({pageSize:e.itemsPerPage,search:c.value});case 5:o=t.sent,n("set-search-results",o.items);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=Object(d.a)(k,1e3);return Object(l.w)(o,(function(){S(),c.value=""})),{closeSearch:function(e){if(document){var t=document.querySelector(".search"),n=e.target;(null==t?void 0:t.contains(n))||(S(),c.value="")}else S(),c.value=""},showSearch:f,hideSearch:S,toggleSearch:function(){e.isSearchOpen?S():f()},rawHandleSearch:k,debouncedHandleSearch:y,handleKeydownEnter:function(e){y.cancel(),k(e)},term:c}}}),k=S,y=(n(931),n(9)),component=Object(y.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SfSearchBar",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeSearch,expression:"closeSearch"}],staticClass:"sf-header__search",attrs:{placeholder:e.$t("Search for items"),"aria-label":"Search",value:e.term},on:{input:function(t){return e.debouncedHandleSearch(t)},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleKeydownEnter(t.target.value)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.hideSearch.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeSearch.apply(null,arguments)}],focus:e.showSearch,click:e.showSearch},scopedSlots:e._u([{key:"icon",fn:function(){return[e.term?n("SfButton",{staticClass:"sf-search-bar__button sf-button--pure",attrs:{"aria-label":"Close search"},on:{click:e.closeSearch}},[n("span",{staticClass:"sf-search-bar__icon"},[n("SvgImage",{attrs:{icon:"cross",label:e.$t("Cancel"),width:"18",height:"18"}})],1)]):n("SfButton",{staticClass:"sf-search-bar__button sf-button--pure",attrs:{"aria-label":"Open search"},on:{click:e.toggleSearch,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.hideSearch.apply(null,arguments)}}},[n("span",{staticClass:"sf-search-bar__icon"},[n("SvgImage",{attrs:{icon:"search",label:e.$t("Search"),width:"18",height:"18"}})],1)])]},proxy:!0}])})}),[],!1,null,"d3ca465c",null);t.default=component.exports},724:function(e,t,n){},931:function(e,t,n){"use strict";n(724)}}]);
//# sourceMappingURL=796341d.js.map