(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{401:function(e,t,r){},415:function(e,t,r){"use strict";r(401)},424:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"c",(function(){return f})),r.d(t,"b",(function(){return v}));r(9);var n=r(5);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var o=e=>"vsf-".concat(e),d=(e,t)=>new Promise(((r,n)=>{try{var c=e();t&&t(null,c),r(c)}catch(e){t&&t(e),n(e)}})),m=(e,t)=>d((()=>JSON.parse(window.localStorage.getItem(o(e)))),t),f=(e,t)=>d((()=>{window.localStorage.removeItem(o(e))}),t),v=(e,t,r)=>d((()=>((e,t)=>{var r=window.localStorage.getItem(e),n=JSON.parse(r),c=t,o=JSON.stringify(l(l({},JSON.parse(JSON.stringify(n))),JSON.parse(JSON.stringify(c))));window.localStorage.setItem(e,o)})(o(e),t)),r)},447:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return c}));var n=/(?=.*\d)(?=.*[A-Za-z])(?=.*[!#$%&*?@^_-])(?!.*\s).{8,}/,c="The password must be at least 8 characters long and must contain at least: 1 uppercase or lowercase letter, 1 number, or one special character (E.g. , . _ & ? etc)"},457:function(e,t,r){"use strict";r(17),r(12);var n=r(28),c={name:"SfCheckbox",directives:{focus:r(382).a},components:{SfIcon:n.a},model:{prop:"selected",event:"change"},props:{name:{type:String,default:""},value:{type:[String,Boolean],default:""},label:{type:String,default:""},hintMessage:{type:String,default:"Required."},required:{type:Boolean,default:!1},infoMessage:{type:String,default:""},errorMessage:{type:String,default:"This field is not correct."},valid:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},selected:{type:[Array,Boolean],default:()=>[]}},computed:{isChecked(){return"boolean"==typeof this.selected?this.selected:this.selected.includes(this.value)},computedMessageSlotName(){return this.messagesHandler("show-error-message","show-info-message",this.required?"show-hint-message":"")},computedMessage(){return this.messagesHandler(this.errorMessage,this.infoMessage,this.required?this.hintMessage:"")},computedMessageClass(){return this.messagesHandler("sf-checkbox__message--error","sf-checkbox__message--info",this.required?"sf-checkbox__message--hint":"")},nameWithoutWhitespace(){return this.name.replace(/\s/g,"")}},methods:{inputHandler(){if("boolean"==typeof this.selected)this.$emit("change",!this.selected);else{var e=[...this.selected];e.includes(this.value)?e=e.filter((e=>e!==this.value)):e.push(this.value),this.$emit("change",e)}},messagesHandler(e,t,r){return this.errorMessage&&!this.valid?e:this.infoMessage&&this.valid?t:this.hintMessage?r:""}}},l=(r(415),r(8)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sf-checkbox",class:{"is-active":e.isChecked,"is-disabled":e.disabled,"has-error":!e.valid,"is-required":e.required},attrs:{"data-testid":e.name}},[r("label",{staticClass:"sf-checkbox__container"},[r("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"sf-checkbox__input",attrs:{type:"checkbox",name:e.name,disabled:e.disabled,"aria-invalid":!e.valid,"aria-required":e.required,"aria-describedby":e.errorMessage?e.nameWithoutWhitespace+"-error":null},domProps:{value:e.value,checked:e.isChecked},on:{change:e.inputHandler}}),e._v(" "),e._t("checkmark",(function(){return[r("span",{staticClass:"sf-checkbox__checkmark",class:{"sf-checkbox__checkmark is-active":e.isChecked}},[r("SfIcon",{class:{"display-none":!e.isChecked},attrs:{icon:"check",color:"white"}})],1)]}),null,{isChecked:e.isChecked,disabled:e.disabled}),e._v(" "),e._t("label",(function(){return[r("span",{staticClass:"sf-checkbox__label",class:{"display-none":!e.label}},[e._v(e._s(e.label))])]}),null,{label:e.label,isChecked:e.isChecked,disabled:e.disabled})],2),e._v(" "),r("div",{staticClass:"sf-checkbox__message"},[r("transition",{attrs:{name:"sf-fade"}},[e.disabled?e._e():e._t(e.computedMessageSlotName,(function(){return[r("div",{class:e.computedMessageClass,attrs:{id:e.nameWithoutWhitespace+"-error","aria-live":"assertive"}},[e._v("\n          "+e._s(e.computedMessage)+"\n        ")])]}),null,{computedMessage:e.computedMessage})],2)],1)])}),[],!1,null,null,null);t.a=component.exports},575:function(e,t,r){},697:function(e,t,r){"use strict";r(575)},925:function(e,t,r){"use strict";r.r(t);r(9);var n=r(2),c=r(5),l=r(144),o=r(152),d=r(27),m=r(457),f=r(0),v=r(410),h=r(408),_=r(15),O=r(16),w=r(35),y=r(424),k=r(447);function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}Object(h.c)("required",S(S({},v.f),{},{message:"This field is required"})),Object(h.c)("min",S(S({},v.d),{},{message:"The field should have at least {length} characters"})),Object(h.c)("email",S(S({},v.c),{},{message:"Invalid email"})),Object(h.c)("password",{message:k.b,validate:e=>k.a.test(e)});var C=Object(f.b)({name:"UserAccount",components:{SfHeading:l.a,SfInput:o.a,SfButton:d.a,SfCheckbox:m.a,ValidationProvider:h.b,ValidationObserver:h.a},setup(){var e=Object(f.v)(),{app:t,$recaptcha:r,$config:c}=Object(f.s)(),l=Object(f.l)(void 0!==r&&c.isRecaptcha),{attachToCart:o,loading:d,error:m}=Object(_.j)(),{cart:v}=Object(O.a)(),{load:h,loading:k,register:j,login:C,user:x,isAuthenticated:A,error:N}=Object(w.b)(),U=Object(f.l)(!1),P=Object(f.l)(!1),$=Object(f.l)(!1),M=Object(f.a)((()=>k.value||d.value)),I=Object(f.a)((()=>!M.value)),E=Object(f.a)((()=>N.value.login||N.value.register||m.value.attachToCart)),form=Object(f.l)({firstname:"",lastname:"",email:"",password:"",is_subscribed:!1});return Object(f.t)(Object(n.a)((function*(){null===x.value&&(yield h()),A.value&&(form.value.firstname=x.value.firstname,form.value.lastname=x.value.lastname,form.value.email=x.value.email)}))),Object(f.g)(Object(n.a)((function*(){var e=yield Object(y.a)("checkout");if(e&&e["user-account"]){var data=e["user-account"];form.value.email=data.email,form.value.firstname=data.firstname,form.value.lastname=data.lastname}}))),{canMoveForward:I,createUserAccount:P,errorUser:N,form:form,handleFormSubmit:c=>Object(n.a)((function*(){if(l.value&&r.init(),!A.value){if(l.value&&P.value){var n=yield r.getResponse();form.value.recaptchaToken=n,form.value.recaptchaInstance=r}yield P.value?j({user:form.value}):o({email:form.value.email,cart:v})}if($.value){var d={};l.value&&(d.recaptchaToken=yield r.getResponse()),yield C({user:S({email:form.value.email,password:form.value.password},d)})}E.value||(yield Object(y.b)("checkout",{"user-account":form.value}),yield e.push(t.localeRoute({name:"shipping"})),c(),U.value=!0),l.value&&r.reset()})),isAuthenticated:A,isFormSubmitted:U,loading:M,loginUserAccount:$,user:x,isRecaptchaEnabled:l}}}),x=(r(697),r(8)),component=Object(x.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit,c=t.reset,l=t.validate;return[r("SfHeading",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-heading",expression:"'user-account-heading'"}],staticClass:"sf-heading--left sf-heading--no-underline title",attrs:{level:3,title:e.$t("User Account")}}),e._v(" "),r("form",{attrs:{novalidate:""},on:{submit:function(t){t.preventDefault(),l().then(n(e.handleFormSubmit(c)))}}},[r("div",{staticClass:"form"},[r("ValidationProvider",{attrs:{name:"firstname",rules:e.loginUserAccount?"":"required|min:2",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-firstName",expression:"'user-account-firstName'"}],staticClass:"form__element form__element--half",attrs:{label:e.$t("First Name"),name:"firstName",required:!e.loginUserAccount,disabled:e.loginUserAccount,valid:!n[0],"error-message":e.$t(n[0])},model:{value:e.form.firstname,callback:function(t){e.$set(e.form,"firstname",t)},expression:"form.firstname"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"lastname",rules:e.loginUserAccount?"":"required|min:2",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-lastName",expression:"'user-account-lastName'"}],staticClass:"form__element form__element--half form__element--half-even",attrs:{label:e.$t("Last Name"),name:"lastName",required:!e.loginUserAccount,disabled:e.loginUserAccount,valid:!n[0],"error-message":e.$t(n[0])},model:{value:e.form.lastname,callback:function(t){e.$set(e.form,"lastname",t)},expression:"form.lastname"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"email",rules:"email|required",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-email",expression:"'user-account-email'"}],staticClass:"form__element form__element--half",attrs:{label:e.$t("E-mail"),name:"email",required:"",valid:!n[0],"error-message":e.$t(n[0])},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})]}}],null,!0)}),e._v(" "),e.createUserAccount||e.loginUserAccount?r("ValidationProvider",{attrs:{rules:"required|min:8|password",slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("SfInput",{directives:[{name:"e2e",rawName:"v-e2e",value:"user-account-password",expression:"'user-account-password'"}],staticClass:"form__element form__element--half form__element--half-even",attrs:{name:"password",label:"Password",type:"password",required:"","has-show-password":"",valid:!n[0],"error-message":e.$t(n[0])},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})]}}],null,!0)}):e._e(),e._v(" "),e.createUserAccount?r("SfCheckbox",{directives:[{name:"e2e",rawName:"v-e2e",value:"sign-up-newsletter",expression:"'sign-up-newsletter'"}],staticClass:"form__element",attrs:{label:"Sign Up for Newsletter",name:"signupNewsletter"},model:{value:e.form.is_subscribed,callback:function(t){e.$set(e.form,"is_subscribed",t)},expression:"form.is_subscribed"}}):e._e()],1),e._v(" "),e.isAuthenticated?e._e():r("SfCheckbox",{directives:[{name:"e2e",rawName:"v-e2e",value:"create-account",expression:"'create-account'"}],staticClass:"form__element",attrs:{label:"Create an account on the store",name:"createUserAccount",disabled:e.loginUserAccount},model:{value:e.createUserAccount,callback:function(t){e.createUserAccount=t},expression:"createUserAccount"}}),e._v(" "),e.isAuthenticated?e._e():r("SfCheckbox",{directives:[{name:"e2e",rawName:"v-e2e",value:"login-account",expression:"'login-account'"}],staticClass:"form__element",attrs:{label:"Login on the store",name:"loginUserAccount",disabled:e.createUserAccount},model:{value:e.loginUserAccount,callback:function(t){e.loginUserAccount=t},expression:"loginUserAccount"}}),e._v(" "),e.isRecaptchaEnabled?r("recaptcha"):e._e(),e._v(" "),r("div",{staticClass:"form"},[r("div",{staticClass:"form__action"},[r("SfButton",{directives:[{name:"e2e",rawName:"v-e2e",value:"continue-to-shipping",expression:"'continue-to-shipping'"}],staticClass:"form__action-button",attrs:{type:"submit",disabled:!e.canMoveForward}},[e._v("\n          "+e._s(e.$t("Continue to shipping"))+"\n        ")])],1)])],1)]}}])})}),[],!1,null,"17b436e0",null);t.default=component.exports}}]);
//# sourceMappingURL=a5e89ea.modern.js.map