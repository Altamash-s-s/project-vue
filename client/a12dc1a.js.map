{"version":3,"sources":["webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressEdit.vue?7063","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressEdit.vue?7afe","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressEdit.vue?530c","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressEdit.vue","webpack:///./modules/customer/getters/userAddressesGetters.ts","webpack:///./modules/customer/getters/addressGetter.ts","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressForm.vue?3b47","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressForm.vue?14c3","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressForm.vue?59d1","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressForm.vue?c745","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressForm.vue","webpack:///./modules/customer/pages/MyAccount/AddressesDetails/AddressEdit.vue?3ce2"],"names":["defineComponent","name","components","SfTabs","AddressForm","props","addressId","type","String","required","setup","router","useRouter","context","useContext","useAddresses","loadAddress","load","updateAddress","update","address","ref","numericAddressId","Number","parseInt","useFetch","addressesData","value","userAddressesGetters","getAddresses","find","id","form","push","localeRoute","component","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","$t","directives","rawName","expression","_v","undefined","$fetchState","pending","on","scopedSlots","_u","key","fn","_s","proxy","addresses","criteria","length","Array","isArray","map","a","transformUserGetter","sort","b","default_shipping","default_billing","Object","keys","entries","filter","every","getTotal","getPostCode","postcode","getStreetName","street","getCity","city","getFirstName","firstname","getLastName","lastname","getCountry","country_code","getPhone","telephone","getEmail","email","getApartmentNumber","apartment","getProvince","region","region_code","getCompanyName","company","getTaxNumber","vat_id","getId","getNeighborhood","neighborhood","getAddressExtra","extra","isDefault","isDefaultShipping","isDefaultBilling","countriesList","countries","c","full_name_english","full_name_locale","label","englishLabel","abbreviation","two_letter_abbreviation","localeCompare","regionList","country","available_regions","code","extend","message","min","oneOf","SfInput","SfButton","SfSelect","SfCheckbox","ValidationProvider","ValidationObserver","default","region_id","loading","Boolean","emit","useCountrySearch","loadCountries","searchCountry","search","computed","addressGetter","regionInformation","updateCountry","params","watch","immediate","onBeforeMount","submitForm","regionId","r","omitDeep","onError","handleSubmit","$event","preventDefault","errors","model","callback","$$v","$set","_l","regionOption","countryOption","_t"],"mappings":"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","file":"a12dc1a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('SfTabs',{staticClass:\"tab-orphan\"},[_c('SfTab',{attrs:{\"title\":_vm.$t('Update the address')}},[_c('p',{directives:[{name:\"t\",rawName:\"v-t\",value:('Contact details updated'),expression:\"'Contact details updated'\"}],staticClass:\"message\"}),_vm._v(\" \"),_c('AddressForm',{attrs:{\"address\":_vm.address || undefined /* use default address prop value during loading */,\"loading\":_vm.$fetchState.pending},on:{\"submit\":_vm.update},scopedSlots:_vm._u([{key:\"submit-button-content\",fn:function(){return [_vm._v(\"\\n          \"+_vm._s(_vm.$t('Update the address'))+\"\\n        \")]},proxy:true}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  ref, defineComponent, useFetch, useRouter, useContext,\n} from '@nuxtjs/composition-api';\nimport { SfTabs } from '@storefront-ui/vue';\nimport AddressForm from '~/modules/customer/pages/MyAccount/AddressesDetails/AddressForm.vue';\n\nimport { useAddresses } from '~/modules/customer/composables/useAddresses';\nimport userAddressesGetters from '~/modules/customer/getters/userAddressesGetters';\n\nimport type { CustomerAddress } from '~/modules/GraphQL/types';\nimport type { SubmitEventPayload } from '~/modules/customer/types/form';\n\nexport default defineComponent({\n  name: 'AddressEdit',\n  components: { SfTabs, AddressForm },\n  props: {\n    addressId: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const router = useRouter();\n    const context = useContext();\n\n    const { load: loadAddress, update: updateAddress } = useAddresses();\n    const address = ref(null);\n    const numericAddressId = Number.parseInt(props.addressId, 10); // because in below find(), CustomerAddress['id'] is numeric\n\n    useFetch(async () => {\n      const addressesData = await loadAddress();\n      address.value = userAddressesGetters\n        .getAddresses(addressesData)\n        .find(({ id }) => id === numericAddressId);\n    });\n\n    const update = async ({ form } : SubmitEventPayload<CustomerAddress>) => {\n      await updateAddress({ address: { ...form, id: numericAddressId } });\n      await router.push(context.localeRoute({ name: 'customer-addresses-details' }));\n    };\n\n    return { address, update };\n  },\n});\n\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--13-0!../../../../../node_modules/ts-loader/index.js??ref--13-1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./AddressEdit.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--13-0!../../../../../node_modules/ts-loader/index.js??ref--13-1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./AddressEdit.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddressEdit.vue?vue&type=template&id=54923a00&scoped=true&\"\nimport script from \"./AddressEdit.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddressEdit.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddressEdit.vue?vue&type=style&index=0&id=54923a00&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54923a00\",\n  null\n  \n)\n\nexport default component.exports","import { CustomerAddress } from '~/composables';\nimport { TransformedCustomerAddress } from '~/modules/customer/composables/types';\nimport { transformUserGetter } from '~/modules/customer/helpers/userAddressManipulator';\n\nexport interface UserAddressesGetters<GENERIC_USER_ADDRESS_ITEM, SPECIFIC_USER_ADDRESS_ITEM> {\n  getAddresses: (shipping: GENERIC_USER_ADDRESS_ITEM[], criteria?: Record<string, any>) => GENERIC_USER_ADDRESS_ITEM[];\n  getTotal: (shipping: GENERIC_USER_ADDRESS_ITEM[]) => number;\n  getPostCode: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getStreetName: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getCity: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getFirstName: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getLastName: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getCountry: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getPhone: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getEmail: (address: SPECIFIC_USER_ADDRESS_ITEM) => string;\n  getApartmentNumber: (address: SPECIFIC_USER_ADDRESS_ITEM) => string | number;\n  getProvince: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getCompanyName: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getTaxNumber: (address: GENERIC_USER_ADDRESS_ITEM) => string;\n  getId: (address: GENERIC_USER_ADDRESS_ITEM) => string | number;\n  isDefault: (address: GENERIC_USER_ADDRESS_ITEM) => boolean;\n  isDefaultShipping: (address: GENERIC_USER_ADDRESS_ITEM) => boolean;\n  isDefaultBilling: (address: GENERIC_USER_ADDRESS_ITEM) => boolean;\n  getNeighborhood: (address: any) => string\n  getAddressExtra: (address: any) => string\n}\n\nconst userAddressesGetters: UserAddressesGetters<CustomerAddress, TransformedCustomerAddress> = {\n  getAddresses: (addresses, criteria?: Record<string, any>) => {\n    if (!addresses || addresses.length === 0 || !Array.isArray(addresses)) return [];\n\n    const addressesData = addresses?.map((a) => transformUserGetter(a))\n      ?.sort((a, b) => ((a.default_shipping === b.default_shipping) ? 0 : (a.default_shipping ? -1 : 1)))\n      ?.sort((a, b) => ((a.default_billing === b.default_billing) ? 0 : (a.default_billing ? -1 : 1)));\n\n    if (!criteria || Object.keys(criteria).length === 0) {\n      return addressesData;\n    }\n\n    const entries = Object.entries(criteria);\n    return addressesData.filter((address) => entries.every(([key, value]) => address[key] === value));\n  },\n  getTotal: (addresses) => addresses.length,\n\n  getPostCode: (address) => address?.postcode || '',\n  getStreetName: (address) => (Array.isArray(address?.street) ? address?.street[0] : address?.street),\n  getCity: (address) => address?.city || '',\n  getFirstName: (address) => address?.firstname || '',\n  getLastName: (address) => address?.lastname || '',\n  getCountry: (address) => address?.country_code || '',\n  getPhone: (address) => address?.telephone || '',\n  getEmail: (address) => address?.email || '',\n  getApartmentNumber: (address) => (Array.isArray(address?.street) ? address?.street[1] : address?.apartment),\n  getProvince: (address) => (address?.region?.region || address?.region?.region_code) || '',\n  getCompanyName: (address) => address?.company || '',\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getTaxNumber: (address) => address?.vat_id || '',\n  getId: (address) => address?.id || '',\n  getNeighborhood: (address) => (Array.isArray(address?.street) ? address?.street[2] : address?.neighborhood),\n  getAddressExtra: (address) => (Array.isArray(address?.street) ? address?.street[3] : address?.extra),\n  isDefault: (address) => (address?.default_shipping || address?.default_billing) || false,\n  isDefaultShipping: (address) => address?.default_shipping || false,\n  isDefaultBilling: (address) => address?.default_billing || false,\n};\n\nexport default userAddressesGetters;\n","import { AddressGetter } from '~/modules/customer/getters/types';\nimport { Countries } from '~/composables';\nimport { Country } from '~/modules/GraphQL/types';\n\nconst countriesList: AddressGetter['countriesList'] = (countries: Countries[]) => countries\n  .filter((c) => c.id && c.full_name_english && c.full_name_locale)\n  .map((c) => ({\n    id: c.id,\n    label: c.full_name_locale,\n    englishLabel: c.full_name_english,\n    abbreviation: c.two_letter_abbreviation,\n  }))\n  .sort((a, b) => a.label.localeCompare(b.label));\n\nconst regionList: AddressGetter['regionList'] = (country: Country) => (country?.available_regions ? country.available_regions\n  .filter((c) => c.id && c.code && c.name)\n  .map((c) => ({\n    id: c.id,\n    label: c.name,\n    abbreviation: c.code,\n  } as {\n    id: number;\n    label: string;\n    abbreviation: string;\n  }))\n  .sort((a, b) => a.label.localeCompare(b.label)) : []);\n\nexport default {\n  countriesList,\n  regionList,\n} as AddressGetter;\n","export * from \"-!../../../../../node_modules/extract-css-chunks-webpack-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./AddressForm.vue?vue&type=style&index=0&id=f2d39966&prod&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ValidationObserver',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('form',{staticClass:\"form\",attrs:{\"id\":\"shipping-details-form\"},on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.submitForm)}}},[_c('div',{staticClass:\"form__horizontal\"},[_c('ValidationProvider',{staticClass:\"form__element\",attrs:{\"rules\":\"required|min:2\",\"name\":\"firstname\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{attrs:{\"name\":\"firstname\",\"label\":_vm.$t('First Name'),\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"disabled\":_vm.loading},model:{value:(_vm.form.firstname),callback:function ($$v) {_vm.$set(_vm.form, \"firstname\", $$v)},expression:\"form.firstname\"}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{staticClass:\"form__element\",attrs:{\"rules\":\"required|min:2\",\"name\":\"lastname\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{attrs:{\"name\":\"lastname\",\"label\":_vm.$t('Last Name'),\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"disabled\":_vm.loading},model:{value:(_vm.form.lastname),callback:function ($$v) {_vm.$set(_vm.form, \"lastname\", $$v)},expression:\"form.lastname\"}})]}}],null,true)})],1),_vm._v(\" \"),_c('ValidationProvider',{staticClass:\"form__element\",attrs:{\"rules\":\"required\",\"name\":\"street\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{attrs:{\"name\":\"street\",\"label\":_vm.$t('Street Name'),\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"disabled\":_vm.loading},model:{value:(_vm.form.street),callback:function ($$v) {_vm.$set(_vm.form, \"street\", $$v)},expression:\"form.street\"}})]}}],null,true)}),_vm._v(\" \"),_c('SfInput',{staticClass:\"form__element\",attrs:{\"name\":\"apartment\",\"label\":_vm.$t('House/Apartment number'),\"required\":\"\"},model:{value:(_vm.form.apartment),callback:function ($$v) {_vm.$set(_vm.form, \"apartment\", $$v)},expression:\"form.apartment\"}}),_vm._v(\" \"),_c('div',{staticClass:\"form__horizontal\"},[_c('ValidationProvider',{staticClass:\"form__element\",attrs:{\"rules\":\"required|min:2\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{attrs:{\"name\":\"city\",\"label\":_vm.$t('City'),\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"disabled\":_vm.loading},model:{value:(_vm.form.city),callback:function ($$v) {_vm.$set(_vm.form, \"city\", $$v)},expression:\"form.city\"}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{staticClass:\"form__element\",attrs:{\"name\":\"region\",\"rules\":!_vm.form.country_code || _vm.regionInformation.length === 0 ? null : 'required|min:2'},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [(!_vm.form.country_code || _vm.regionInformation.length === 0)?_c('SfInput',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-state'),expression:\"'shipping-state'\"}],attrs:{\"label\":_vm.$t('State/Province'),\"name\":\"state\",\"valid\":!!_vm.form.country_code,\"error-message\":!_vm.form.country_code ? _vm.$t('Please select a country first') : '',\"disabled\":!_vm.form.country_code || _vm.loading},model:{value:(_vm.form.region.region),callback:function ($$v) {_vm.$set(_vm.form.region, \"region\", $$v)},expression:\"form.region.region\"}}):_c('SfSelect',{directives:[{name:\"e2e\",rawName:\"v-e2e\",value:('shipping-state'),expression:\"'shipping-state'\"}],staticClass:\"form__element form__element--half form__element--half-even form__select sf-select--underlined\",attrs:{\"label\":_vm.$t('State/Province'),\"name\":\"state\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"disabled\":_vm.loading},model:{value:(_vm.form.region.region_code),callback:function ($$v) {_vm.$set(_vm.form.region, \"region_code\", $$v)},expression:\"form.region.region_code\"}},_vm._l((_vm.regionInformation),function(regionOption){return _c('SfSelectOption',{key:regionOption.id,attrs:{\"value\":regionOption.abbreviation}},[_vm._v(\"\\n            \"+_vm._s(regionOption.label)+\"\\n          \")])}),1)]}}],null,true)})],1),_vm._v(\" \"),_c('div',{staticClass:\"form__horizontal\"},[_c('ValidationProvider',{staticClass:\"form__element\",attrs:{\"rules\":\"required|min:4\",\"name\":\"postcode\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{attrs:{\"name\":\"postcode\",\"label\":_vm.$t('Zip-code'),\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"disabled\":_vm.loading},model:{value:(_vm.form.postcode),callback:function ($$v) {_vm.$set(_vm.form, \"postcode\", $$v)},expression:\"form.postcode\"}})]}}],null,true)}),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"name\":\"country_code\",\"rules\":\"required|min:2\",\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfSelect',{staticClass:\"form__select sf-select--underlined\",attrs:{\"label\":_vm.$t('Country'),\"name\":\"country\",\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"disabled\":_vm.loading},on:{\"input\":function($event){return _vm.updateCountry({ id: $event })}},model:{value:(_vm.form.country_code),callback:function ($$v) {_vm.$set(_vm.form, \"country_code\", $$v)},expression:\"form.country_code\"}},[_c('SfSelectOption',{attrs:{\"value\":''}}),_vm._v(\" \"),_vm._l((_vm.countriesList),function(countryOption){return _c('SfSelectOption',{key:countryOption.id,attrs:{\"value\":countryOption.abbreviation}},[_vm._v(\"\\n            \"+_vm._s(countryOption.label)+\"\\n          \")])})],2)]}}],null,true)})],1),_vm._v(\" \"),_c('ValidationProvider',{staticClass:\"form__element\",attrs:{\"rules\":\"required|min:8\",\"name\":\"telephone\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('SfInput',{attrs:{\"name\":\"telephone\",\"label\":_vm.$t('Phone number'),\"required\":\"\",\"valid\":!errors[0],\"error-message\":_vm.$t(errors[0]),\"disabled\":_vm.loading},model:{value:(_vm.form.telephone),callback:function ($$v) {_vm.$set(_vm.form, \"telephone\", $$v)},expression:\"form.telephone\"}})]}}],null,true)}),_vm._v(\" \"),_c('SfCheckbox',{staticClass:\"form__checkbox-isDefaultShipping\",attrs:{\"name\":\"isDefaultShipping\",\"label\":_vm.$t('Set as default shipping'),\"disabled\":_vm.loading},model:{value:(_vm.form.default_shipping),callback:function ($$v) {_vm.$set(_vm.form, \"default_shipping\", $$v)},expression:\"form.default_shipping\"}}),_vm._v(\" \"),_c('SfCheckbox',{staticClass:\"form__checkbox-isDefaultBilling\",attrs:{\"name\":\"isDefaultBilling\",\"label\":_vm.$t('Set as default billing'),\"disabled\":_vm.loading},model:{value:(_vm.form.default_billing),callback:function ($$v) {_vm.$set(_vm.form, \"default_billing\", $$v)},expression:\"form.default_billing\"}}),_vm._v(\" \"),_c('SfButton',{staticClass:\"form__button\",attrs:{\"type\":\"submit\",\"disabled\":_vm.loading}},[_vm._t(\"submit-button-content\")],2)],1)]}}],null,true)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  SfInput,\n  SfButton,\n  SfSelect,\n  SfCheckbox,\n} from '@storefront-ui/vue';\nimport { required, min, oneOf } from 'vee-validate/dist/rules';\nimport { ValidationProvider, ValidationObserver, extend } from 'vee-validate';\nimport {\n  ref,\n  watch,\n  computed,\n  defineComponent,\n  onBeforeMount,\n} from '@nuxtjs/composition-api';\nimport omitDeep from 'omit-deep';\nimport { PropType } from 'vue';\nimport { CountryCodeEnum, useCountrySearch } from '~/composables';\nimport type { Countries, Country, UseCountrySearchParams } from '~/composables';\nimport addressGetter from '~/modules/customer/getters/addressGetter';\nimport type { TransformedCustomerAddress } from '~/modules/customer/composables/types';\n\nextend('required', {\n  ...required,\n  message: 'This field is required',\n});\n\nextend('min', {\n  ...min,\n  message: 'The field should have at least {length} characters',\n});\n\nextend('oneOf', {\n  ...oneOf,\n  message: 'Invalid country',\n});\n\nexport default defineComponent({\n  name: 'AddressForm',\n\n  components: {\n    SfInput,\n    SfButton,\n    SfSelect,\n    SfCheckbox,\n    ValidationProvider,\n    ValidationObserver,\n  },\n\n  props: {\n    address: {\n      type: Object as PropType<TransformedCustomerAddress>,\n      default: () => ({\n        apartment: '',\n        city: '',\n        country_code: '' as CountryCodeEnum,\n        firstname: '',\n        lastname: '',\n        postcode: '',\n        region: {\n          region_code: '',\n          region_id: 0,\n        },\n        street: '',\n        telephone: '',\n        default_shipping: false,\n        default_billing: false,\n      }),\n    },\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  setup(props, { emit }) {\n    const { load: loadCountries, search: searchCountry } = useCountrySearch();\n\n    const form = ref<TransformedCustomerAddress | null>(null);\n\n    const countries = ref<Countries[]>([]);\n    const countriesList = computed(() => addressGetter.countriesList(countries.value));\n    const country = ref<Country | null>(null);\n    const regionInformation = computed(() => addressGetter.regionList(country.value));\n\n    const updateCountry = async (params: UseCountrySearchParams) => {\n      country.value = await searchCountry(params);\n      form.value.region = { region_id: null, region_code: '' };\n    };\n\n    watch(() => props.address, () => {\n      form.value = {\n        apartment: props.address.apartment,\n        city: props.address.city,\n        country_code: props.address.country_code,\n        firstname: props.address.firstname,\n        lastname: props.address.lastname,\n        postcode: props.address.postcode,\n        region: {\n          region_code: '',\n          region_id: null,\n          ...props.address.region,\n        },\n        street: props.address.street,\n        telephone: props.address.telephone,\n        default_shipping: props.address.default_shipping || false,\n        default_billing: props.address.default_billing || false,\n      } as TransformedCustomerAddress;\n    }, { immediate: true });\n\n    const submitForm = () => {\n      const regionId = regionInformation.value.find((r) => r.abbreviation === form.value.region.region_code)?.id;\n      form.value.region = regionId\n        ? { region_id: regionId }\n        : {\n          ...form.value.region,\n          region_code: '',\n          region_id: null,\n        };\n\n      emit('submit', {\n        form: omitDeep(form.value, ['__typename']),\n        // TODO: Handle Error\n        onError: () => {},\n      });\n    };\n\n    onBeforeMount(async () => {\n      countries.value = await loadCountries();\n      if (props.address.country_code) {\n        country.value = await searchCountry({ id: props.address.country_code });\n      }\n    });\n\n    return {\n      form,\n      submitForm,\n      countriesList,\n      regionInformation,\n      updateCountry,\n    };\n  },\n});\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--13-0!../../../../../node_modules/ts-loader/index.js??ref--13-1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./AddressForm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--13-0!../../../../../node_modules/ts-loader/index.js??ref--13-1!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./AddressForm.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddressForm.vue?vue&type=template&id=f2d39966&scoped=true&\"\nimport script from \"./AddressForm.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddressForm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddressForm.vue?vue&type=style&index=0&id=f2d39966&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f2d39966\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/extract-css-chunks-webpack-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--15-0!./AddressEdit.vue?vue&type=style&index=0&id=54923a00&prod&lang=scss&scoped=true&\""],"sourceRoot":""}